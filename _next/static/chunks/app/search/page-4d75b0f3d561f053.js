(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[959],{63:(e,t,r)=>{"use strict";var a=r(7260);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},1289:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});let a=(0,r(1993).UU)("https://ogqjfeumqaaxorxrehxd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ncWpmZXVtcWFheG9yeHJlaHhkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzcxOTUsImV4cCI6MjA3NTUxMzE5NX0.5EgofBpIzK_MyB4fRnTSLCxP3nMCznR5PIJ3kD0xjPk")},4642:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var a=r(5155);r(2115);let l="#BF1E2E",s="#0B2C5C",o="/school-lost-and-found";function n(e){let{item:t}=e,r="".concat(o,"/item/?id=").concat(encodeURIComponent(t.id)),n="".concat(o,"/claim?item=").concat(encodeURIComponent(t.id));return(0,a.jsxs)("article",{className:"group relative flex flex-col overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm transition-all hover:-translate-y-1 hover:shadow-lg dark:border-gray-800 dark:bg-gray-950","aria-label":"View details for ".concat(t.title),children:[(0,a.jsxs)("a",{href:r,className:"relative block aspect-[4/3] overflow-hidden bg-neutral-100 dark:bg-neutral-900",children:[t.thumb?(0,a.jsx)("img",{src:t.thumb,alt:t.title,loading:"lazy",className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"}):(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center text-sm text-gray-500",children:"No image"}),(0,a.jsx)("div",{className:"absolute inset-x-0 bottom-0 h-1 opacity-80",style:{background:"linear-gradient(90deg, ".concat(l,", ").concat(s,")")}})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 p-4",children:[(0,a.jsx)("a",{href:r,className:"line-clamp-1 font-semibold leading-tight text-gray-900 hover:text-[var(--creek-red)] dark:text-gray-100",style:{"--creek-red":l},children:t.title}),(0,a.jsxs)("p",{className:"line-clamp-1 text-sm text-gray-600 dark:text-gray-400",children:[t.location," • ",t.category]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Found ",new Date(t.date).toLocaleDateString()]}),(0,a.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,a.jsx)("a",{href:n,className:"inline-flex items-center justify-center rounded-lg px-3 py-1.5 text-xs font-semibold text-white transition-colors",style:{backgroundColor:l},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#A81828",onMouseLeave:e=>e.currentTarget.style.backgroundColor=l,children:"Start claim"}),(0,a.jsx)("a",{href:r,className:"inline-flex items-center justify-center rounded-lg border border-gray-300 px-3 py-1.5 text-xs font-medium text-[var(--creek-navy)] transition-colors hover:bg-[var(--creek-navy)] hover:text-white dark:border-gray-700",style:{"--creek-navy":s},children:"Details"})]})]})]})}},6278:(e,t,r)=>{"use strict";r.d(t,{W:()=>a});let a="/school-lost-and-found"},8532:(e,t,r)=>{"use strict";r.d(t,{default:()=>k});var a=r(5155),l=r(6278),s=r(2115),o=r(63),n=r(2619),i=r.n(n),c=r(1289),d=r(4642);let m=e=>e.trim().toLowerCase(),u=e=>Array.from(new Map(e.map(e=>[m(e),e.trim()])).values()),g="#BF1E2E",x="#0B2C5C",h=["Clothing","Electronics","Accessories","Bags","Books","Keys","IDs / Cards","Bottle","Misc"];function f(e){var t,r,n,i,c;let{initial:d}=e,f=(0,o.useRouter)();(0,o.useSearchParams)();let b=(0,s.useRef)(null),[p,y]=(0,s.useState)(u((null!=(t=d.category)?t:[]).filter(Boolean))),j=(0,s.useMemo)(()=>u(p),[p]),v=(0,s.useMemo)(()=>d.q&&d.q.length>0||j.length>0||d.location&&d.location.length>0||d.date_from&&d.date_from.length>0||d.date_to&&d.date_to.length>0||"oldest"===d.sort,[d,j]),w=(0,s.useCallback)((e,t)=>{let r=new FormData(e),a=new URLSearchParams;for(let[e,t]of r.entries())t&&"category"!==e&&a.set(e,String(t));u(t).forEach(e=>a.append("category",e));let l=a.toString();return l?"/search?".concat(l):"/search"},[]),k=(0,s.useCallback)(e=>{let t=e.currentTarget;f.replace(w(t,j))},[f,w,j]),N=()=>{y([]);let e=b.current;e&&(e.reset(),f.replace("/search"))},C=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18'><circle cx='1' cy='1' r='1' fill='".concat(x,"22'/></svg>"));return(0,a.jsx)("aside",{className:"w-full md:w-64 md:sticky md:top-16 self-start",children:(0,a.jsxs)("div",{className:"rounded-3xl p-5 shadow-[0_10px_30px_rgba(0,0,0,.05)] bg-white dark:bg-gray-900",style:{backgroundImage:'url("data:image/svg+xml,'.concat(C,'")'),backgroundColor:"#fafbff"},children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("svg",{width:"22",height:"26",viewBox:"0 0 24 28","aria-hidden":!0,children:[(0,a.jsx)("path",{d:"M12 0l10 4v8c0 7-5 12-10 16C7 24 2 19 2 12V4l10-4z",fill:g}),(0,a.jsx)("path",{d:"M12 3l7 2v6c0 5-4 9-7 12-3-3-7-7-7-12V5l7-2z",fill:"white",opacity:".95"}),(0,a.jsx)("path",{d:"M12 4.5l5 1.5v5c0 4-3.2 7-5 8.8-1.8-1.8-5-4.8-5-8.8v-5l5-1.5z",fill:x})]}),(0,a.jsx)("h2",{className:"text-base font-semibold",style:{color:x},children:"Filters"})]}),v&&(0,a.jsx)("button",{type:"button",onClick:N,className:"text-sm font-medium underline",style:{color:g},children:"Reset"})]}),(0,a.jsxs)("form",{ref:b,action:l.W?"".concat(l.W,"/search"):"/search",method:"get",className:"space-y-5",onChange:k,children:[d.q&&(0,a.jsx)("input",{type:"hidden",name:"q",defaultValue:d.q}),j.map(e=>(0,a.jsx)("input",{type:"hidden",name:"category",value:e},"cat-".concat(m(e)))),(0,a.jsxs)("div",{className:"border-b border-gray-200 dark:border-gray-800 pb-4",children:[(0,a.jsx)("p",{className:"mb-2 text-sm font-medium",style:{color:x},children:"Category"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:h.map(e=>{let t=j.some(t=>m(t)===m(e));return(0,a.jsx)("button",{type:"button",onClick:()=>(e=>{let t=m(e);y(r=>{let a=new Map(r.map(e=>[m(e),e]));a.has(t)?a.delete(t):a.set(t,e.trim());let l=Array.from(a.values()),s=b.current;return s&&f.replace(w(s,l)),l})})(e),className:"rounded-full px-3 py-1.5 text-sm transition shadow-sm ring-1 ".concat(t?"text-white":"bg-white text-gray-700 dark:bg-gray-900 dark:text-gray-200"),style:{backgroundColor:t?g:void 0,borderColor:t?g:"rgba(0,0,0,0.08)"},"aria-pressed":t,children:e},"chip-".concat(m(e)))})})]}),(0,a.jsxs)("div",{className:"border-b border-gray-200 dark:border-gray-800 pb-4",children:[(0,a.jsx)("label",{htmlFor:"location",className:"mb-1 block text-sm font-medium",style:{color:x},children:"Location"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:"location",name:"location",placeholder:"e.g., Gym, Library",defaultValue:null!=(r=d.location)?r:"",className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900  px-3 py-2 text-sm shadow-sm outline-none focus:ring-2  focus:ring-[rgba(11,44,92,0.6)] focus:border-[rgba(11,44,92,1)]"}),(0,a.jsx)("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-gray-400",children:"⌕"})]})]}),(0,a.jsxs)("div",{className:"border-b border-gray-200 dark:border-gray-800 pb-4",children:[(0,a.jsx)("p",{className:"mb-2 text-sm font-medium",style:{color:x},children:"Date range"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("div",{className:"min-w-0 flex-1",children:(0,a.jsx)("input",{type:"date",name:"date_from",defaultValue:null!=(n=d.date_from)?n:"",className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900  px-3 py-2 text-sm shadow-sm outline-none focus:ring-2  focus:ring-[rgba(11,44,92,0.6)] focus:border-[rgba(11,44,92,1)]"})}),(0,a.jsx)("div",{className:"min-w-0 flex-1",children:(0,a.jsx)("input",{type:"date",name:"date_to",defaultValue:null!=(i=d.date_to)?i:"",className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900  px-3 py-2 text-sm shadow-sm outline-none focus:ring-2  focus:ring-[rgba(11,44,92,0.6)] focus:border-[rgba(11,44,92,1)]"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sort",className:"mb-1 block text-sm font-medium",style:{color:x},children:"Sort by"}),(0,a.jsxs)("select",{id:"sort",name:"sort",defaultValue:null!=(c=d.sort)?c:"newest",className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900  px-3 py-2 text-sm shadow-sm outline-none focus:ring-2  focus:ring-[rgba(11,44,92,0.6)] focus:border-[rgba(11,44,92,1)]",children:[(0,a.jsx)("option",{value:"newest",children:"Newest first"}),(0,a.jsx)("option",{value:"oldest",children:"Oldest first"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{type:"submit",className:"rounded-lg px-4 py-2 text-sm font-semibold text-white shadow-md transition hover:opacity-90",style:{backgroundColor:g},children:"Apply"}),(0,a.jsx)("button",{type:"button",onClick:N,className:"rounded-lg border px-4 py-2 text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-800",style:{borderColor:"rgba(0,0,0,.1)",color:x},children:"Reset"})]})]})]})})}let b="".concat(l.W,"/no-image.png"),p="#BF1E2E",y="#0B2C5C";function j(e){let{title:t,kicker:r}=e;return(0,a.jsxs)("div",{className:"mb-5",children:[r&&(0,a.jsx)("div",{className:"inline-block rounded-full px-3 py-1 text-xs font-semibold tracking-wide text-white",style:{backgroundColor:y},children:r}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-3",children:[(0,a.jsxs)("svg",{width:"28",height:"32",viewBox:"0 0 24 28","aria-hidden":!0,className:"drop-shadow-sm",children:[(0,a.jsx)("path",{d:"M12 0l10 4v8c0 7-5 12-10 16C7 24 2 19 2 12V4l10-4z",fill:p}),(0,a.jsx)("path",{d:"M12 3l7 2v6c0 5-4 9-7 12-3-3-7-7-7-12V5l7-2z",fill:"white",opacity:".95"}),(0,a.jsx)("path",{d:"M12 4.5l5 1.5v5c0 4-3.2 7-5 8.8-1.8-1.8-5-4.8-5-8.8v-5l5-1.5z",fill:y})]}),(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight",style:{color:y},children:t})]}),(0,a.jsx)("div",{className:"mt-2 h-1 rounded-full",style:{background:"linear-gradient(90deg, ".concat(p,", ").concat(y,")")}})]})}function v(e){let{children:t}=e,r=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18'><circle cx='1' cy='1' r='1' fill='".concat(y,"22'/></svg>"));return(0,a.jsx)("div",{className:"rounded-3xl p-6 sm:p-8 shadow-[0_10px_30px_rgba(0,0,0,.05)]",style:{backgroundImage:'url("data:image/svg+xml,'.concat(r,'")'),backgroundColor:"#fafbff"},children:t})}function w(e){let{children:t}=e;return(0,a.jsx)("span",{className:"rounded-full bg-white px-3 py-1 text-sm shadow-sm ring-1 ring-gray-200 dark:bg-gray-900 dark:ring-gray-800",children:t})}function k(){let e=(0,o.useSearchParams)(),t=(0,s.useMemo)(()=>{var t;return(null!=(t=e.get("q"))?t:"").trim()},[e]),r=(0,s.useMemo)(()=>{var t;return(null!=(t=e.get("location"))?t:"").trim()},[e]),l=(0,s.useMemo)(()=>{var t;return(null!=(t=e.get("date_from"))?t:"").trim()},[e]),n=(0,s.useMemo)(()=>{var t;return(null!=(t=e.get("date_to"))?t:"").trim()},[e]),g="oldest"===e.get("sort")?"oldest":"newest",x=(0,s.useMemo)(()=>{let t=e.getAll("category").filter(Boolean);if(0===t.length){let t=e.get("category");if(null==t?void 0:t.includes(","))return t.split(",").map(e=>e.trim()).filter(Boolean);if(t)return[t]}return t},[e]),h=(0,s.useMemo)(()=>u(x),[x]),[k,N]=(0,s.useState)([]),[C,_]=(0,s.useState)(!1),[I,S]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=!1;return(async()=>{var a;_(!0),S(null);let s=c.N.schema("public").from("items").select("id,title,location,category,date_found,photo_url,status").eq("status","listed");t&&(s=s.or("title.ilike.%".concat(t,"%,location.ilike.%").concat(t,"%,category.ilike.%").concat(t,"%"))),h.length&&(s=s.in("category",h)),r&&(s=s.ilike("location","%".concat(r,"%"))),l&&(s=s.gte("date_found",l)),n&&(s=s.lte("date_found",n)),s=s.order("date_found",{ascending:"oldest"===g,nullsFirst:!1});let{data:o,error:i}=await s;if(!e){if(i){S(i.message),_(!1);return}N(null!=(a=(null!=o?o:[]).map(e=>{var t,r,a,l;let s=b,o=null!=(t=e.photo_url)?t:null;if(o)if(/^https?:\/\//i.test(o))s=o;else{let{data:e}=c.N.storage.from("item-photos").getPublicUrl(o);s=(null==e?void 0:e.publicUrl)||b}return{id:String(e.id),title:String(null!=(r=e.title)?r:"Untitled"),location:String(null!=(a=e.location)?a:"—"),category:String(null!=(l=e.category)?l:"Misc"),date:e.date_found?new Date(e.date_found).toISOString().slice(0,10):"",thumb:s}}))?a:[]),_(!1)}})(),()=>{e=!0}},[t,h,r,l,n,g]);let M=t||h.length>0||r||l||n||"oldest"===g;return(0,a.jsx)("div",{className:"min-h-screen",style:{background:"linear-gradient(180deg, #0B2C5C0A 0%, #0B2C5C08 40%, #ffffff 100%)",backgroundImage:"radial-gradient(rgba(11,44,92,0.06) 1px, transparent 1px)",backgroundSize:"18px 18px"},children:(0,a.jsxs)("section",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10",children:[(0,a.jsx)(j,{title:"Browse Items",kicker:"Search"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[16rem_1fr] gap-6",children:[(0,a.jsx)(f,{initial:{q:t,category:h,location:r,date_from:l,date_to:n,sort:g}}),(0,a.jsx)(v,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",style:{color:y},children:"Results"}),M&&(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[t&&(0,a.jsxs)(w,{children:["q: “",t,"”"]}),h.map(e=>(0,a.jsx)(w,{children:e},"pill-".concat(m(e)))),r&&(0,a.jsx)(w,{children:r}),(l||n)&&(0,a.jsxs)(w,{children:[l||"…"," → ",n||"…"]}),(0,a.jsx)(i(),{href:"/search",className:"text-sm underline",style:{color:p},children:"Clear"})]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:C?"Searching…":"".concat(k.length," item").concat(1===k.length?"":"s"," found")}),I&&(0,a.jsxs)("div",{className:"rounded-lg border border-red-500/30 bg-red-50 p-3 text-sm text-red-700 dark:border-red-500/40 dark:bg-red-900/20 dark:text-red-200",children:["Error: ",I]}),C||I||0!==k.length?(0,a.jsx)("ul",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:k.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(d.I,{item:e})},e.id))}):(0,a.jsx)("div",{className:"grid place-items-center rounded-2xl border border-dashed border-gray-300 py-16 text-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-medium",children:"No items match your filters."}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Try adjusting your keywords or categories."}),(0,a.jsx)(i(),{href:"/search",className:"mt-4 inline-block rounded-lg px-4 py-2 text-white",style:{backgroundColor:p},children:"Clear filters"})]})})]})})]})]})})}},9526:(e,t,r)=>{Promise.resolve().then(r.bind(r,8532))}},e=>{e.O(0,[993,619,441,255,358],()=>e(e.s=9526)),_N_E=e.O()}]);