(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[959],{63:(e,t,r)=>{"use strict";var a=r(7260);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},1289:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});let a=(0,r(1993).UU)("https://ogqjfeumqaaxorxrehxd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ncWpmZXVtcWFheG9yeHJlaHhkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzcxOTUsImV4cCI6MjA3NTUxMzE5NX0.5EgofBpIzK_MyB4fRnTSLCxP3nMCznR5PIJ3kD0xjPk")},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:r,strokeWidth:i?24*Number(n)/Number(s):n,className:l("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),i=(e,t)=>{let r=(0,a.forwardRef)((r,o)=>{let{className:i,...d}=r;return(0,a.createElement)(n,{ref:o,iconNode:t,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...d})});return r.displayName=s(e),r}},4642:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var a=r(5155),s=r(2115),l=r(5229),o=r(7650);function n(e){var t;let{item:r}=e,[n,i]=s.useState(!1),[d,c]=s.useState(!1),u=s.useRef(null);return s.useEffect(()=>c(!0),[]),s.useEffect(()=>{n&&u.current&&u.current.focus()},[n]),s.useEffect(()=>{if(!n)return;let e=e=>"Escape"===e.key&&i(!1);return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("article",{role:"button",tabIndex:0,onClick:()=>i(!0),onKeyDown:e=>"Enter"===e.key&&i(!0),className:"group relative flex flex-col overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm outline-none transition hover:-translate-y-0.5 hover:shadow-md dark:border-gray-800 dark:bg-gray-950 cursor-pointer","aria-label":"View details for ".concat(r.title),children:[(0,a.jsx)("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100 dark:bg-gray-900",children:r.thumb?(0,a.jsx)("img",{src:r.thumb,alt:r.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}):(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center text-sm text-gray-500 dark:text-gray-400",children:"No image"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1.5 p-4",children:[(0,a.jsx)("h3",{className:"line-clamp-1 font-medium leading-tight text-gray-900 dark:text-gray-100",children:r.title}),(0,a.jsxs)("p",{className:"line-clamp-1 text-sm text-gray-600 dark:text-gray-400",children:[r.location," • ",r.category]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Found ",new Date(r.date).toLocaleDateString()]})]})]}),d&&n&&(0,o.createPortal)((0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onMouseDown:e=>e.target===e.currentTarget&&i(!1),children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),(0,a.jsxs)("div",{className:"relative z-10 grid w-[min(90vw,900px)] max-h-[90vh] grid-cols-1 overflow-hidden rounded-2xl bg-white shadow-2xl dark:bg-gray-950 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"relative group overflow-hidden bg-gray-100 dark:bg-gray-900",children:[r.thumb?(0,a.jsx)("img",{src:r.thumb,alt:r.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"}):(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center text-gray-500",children:"No image"}),(0,a.jsx)("button",{ref:u,onClick:()=>i(!1),className:"absolute right-3 top-3 inline-flex h-9 w-9 items-center justify-center rounded-full bg-black/60 text-white transition hover:bg-black/80 focus-visible:ring-2 focus-visible:ring-white","aria-label":"Close",children:(0,a.jsx)(l.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-5 md:p-6 overflow-y-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold tracking-tight md:text-2xl",children:r.title}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:[r.location," • ",r.category]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Found ",new Date(r.date).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"prose max-w-none prose-p:my-3 dark:prose-invert",children:[(0,a.jsx)("h3",{className:"mb-1 text-base font-medium",children:"Description"}),(0,a.jsx)("p",{className:"text-sm leading-6",children:(null==(t=r.description)?void 0:t.trim())||"No description provided."})]}),(0,a.jsx)("div",{className:"mt-auto",children:(0,a.jsx)("button",{onClick:()=>alert("Claim flow here"),className:"rounded-xl bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:"Start claim"})})]})]})]}),document.body)]})}},5229:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6278:(e,t,r)=>{"use strict";r.d(t,{W:()=>a});let a="/school-lost-and-found"},8532:(e,t,r)=>{"use strict";r.d(t,{default:()=>N});var a=r(5155),s=r(6278),l=r(2115),o=r(63),n=r(2619),i=r.n(n),d=r(1289),c=r(4642);let u=e=>e.trim().toLowerCase(),m=e=>Array.from(new Map(e.map(e=>[u(e),e.trim()])).values()),g="#BF1E2E",h="#0B2C5C",x=["Clothing","Electronics","Accessories","Bags","Books","Keys","IDs / Cards","Bottle","Misc"];function f(e){var t,r,n,i,d;let{initial:c}=e,f=(0,o.useRouter)();(0,o.useSearchParams)();let p=(0,l.useRef)(null),[b,y]=(0,l.useState)(m((null!=(t=c.category)?t:[]).filter(Boolean))),v=(0,l.useMemo)(()=>m(b),[b]),j=(0,l.useMemo)(()=>c.q&&c.q.length>0||v.length>0||c.location&&c.location.length>0||c.date_from&&c.date_from.length>0||c.date_to&&c.date_to.length>0||"oldest"===c.sort,[c,v]),w=(0,l.useCallback)((e,t)=>{let r=new FormData(e),a=new URLSearchParams;for(let[e,t]of r.entries())t&&"category"!==e&&a.set(e,String(t));m(t).forEach(e=>a.append("category",e));let s=a.toString();return s?"/search?".concat(s):"/search"},[]),N=(0,l.useCallback)(e=>{let t=e.currentTarget;f.replace(w(t,v))},[f,w,v]),k=()=>{y([]);let e=p.current;e&&(e.reset(),f.replace("/search"))},C=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18'><circle cx='1' cy='1' r='1' fill='".concat(h,"22'/></svg>"));return(0,a.jsx)("aside",{className:"w-full md:w-64 md:sticky md:top-16 self-start",children:(0,a.jsxs)("div",{className:"rounded-3xl p-5 shadow-[0_10px_30px_rgba(0,0,0,.05)] bg-white dark:bg-gray-900",style:{backgroundImage:'url("data:image/svg+xml,'.concat(C,'")'),backgroundColor:"#fafbff"},children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("svg",{width:"22",height:"26",viewBox:"0 0 24 28","aria-hidden":!0,children:[(0,a.jsx)("path",{d:"M12 0l10 4v8c0 7-5 12-10 16C7 24 2 19 2 12V4l10-4z",fill:g}),(0,a.jsx)("path",{d:"M12 3l7 2v6c0 5-4 9-7 12-3-3-7-7-7-12V5l7-2z",fill:"white",opacity:".95"}),(0,a.jsx)("path",{d:"M12 4.5l5 1.5v5c0 4-3.2 7-5 8.8-1.8-1.8-5-4.8-5-8.8v-5l5-1.5z",fill:h})]}),(0,a.jsx)("h2",{className:"text-base font-semibold",style:{color:h},children:"Filters"})]}),j&&(0,a.jsx)("button",{type:"button",onClick:k,className:"text-sm font-medium underline",style:{color:g},children:"Reset"})]}),(0,a.jsxs)("form",{ref:p,action:s.W?"".concat(s.W,"/search"):"/search",method:"get",className:"space-y-5",onChange:N,children:[c.q&&(0,a.jsx)("input",{type:"hidden",name:"q",defaultValue:c.q}),v.map(e=>(0,a.jsx)("input",{type:"hidden",name:"category",value:e},"cat-".concat(u(e)))),(0,a.jsxs)("div",{className:"border-b border-gray-200 dark:border-gray-800 pb-4",children:[(0,a.jsx)("p",{className:"mb-2 text-sm font-medium",style:{color:h},children:"Category"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map(e=>{let t=v.some(t=>u(t)===u(e));return(0,a.jsx)("button",{type:"button",onClick:()=>(e=>{let t=u(e);y(r=>{let a=new Map(r.map(e=>[u(e),e]));a.has(t)?a.delete(t):a.set(t,e.trim());let s=Array.from(a.values()),l=p.current;return l&&f.replace(w(l,s)),s})})(e),className:"rounded-full px-3 py-1.5 text-sm transition shadow-sm ring-1 ".concat(t?"text-white":"bg-white text-gray-700 dark:bg-gray-900 dark:text-gray-200"),style:{backgroundColor:t?g:void 0,borderColor:t?g:"rgba(0,0,0,0.08)"},"aria-pressed":t,children:e},"chip-".concat(u(e)))})})]}),(0,a.jsxs)("div",{className:"border-b border-gray-200 dark:border-gray-800 pb-4",children:[(0,a.jsx)("label",{htmlFor:"location",className:"mb-1 block text-sm font-medium",style:{color:h},children:"Location"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:"location",name:"location",placeholder:"e.g., Gym, Library",defaultValue:null!=(r=c.location)?r:"",className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900  px-3 py-2 text-sm shadow-sm outline-none focus:ring-2  focus:ring-[rgba(11,44,92,0.6)] focus:border-[rgba(11,44,92,1)]"}),(0,a.jsx)("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-gray-400",children:"⌕"})]})]}),(0,a.jsxs)("div",{className:"border-b border-gray-200 dark:border-gray-800 pb-4",children:[(0,a.jsx)("p",{className:"mb-2 text-sm font-medium",style:{color:h},children:"Date range"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("div",{className:"min-w-0 flex-1",children:(0,a.jsx)("input",{type:"date",name:"date_from",defaultValue:null!=(n=c.date_from)?n:"",className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900  px-3 py-2 text-sm shadow-sm outline-none focus:ring-2  focus:ring-[rgba(11,44,92,0.6)] focus:border-[rgba(11,44,92,1)]"})}),(0,a.jsx)("div",{className:"min-w-0 flex-1",children:(0,a.jsx)("input",{type:"date",name:"date_to",defaultValue:null!=(i=c.date_to)?i:"",className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900  px-3 py-2 text-sm shadow-sm outline-none focus:ring-2  focus:ring-[rgba(11,44,92,0.6)] focus:border-[rgba(11,44,92,1)]"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sort",className:"mb-1 block text-sm font-medium",style:{color:h},children:"Sort by"}),(0,a.jsxs)("select",{id:"sort",name:"sort",defaultValue:null!=(d=c.sort)?d:"newest",className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900  px-3 py-2 text-sm shadow-sm outline-none focus:ring-2  focus:ring-[rgba(11,44,92,0.6)] focus:border-[rgba(11,44,92,1)]",children:[(0,a.jsx)("option",{value:"newest",children:"Newest first"}),(0,a.jsx)("option",{value:"oldest",children:"Oldest first"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{type:"submit",className:"rounded-lg px-4 py-2 text-sm font-semibold text-white shadow-md transition hover:opacity-90",style:{backgroundColor:g},children:"Apply"}),(0,a.jsx)("button",{type:"button",onClick:k,className:"rounded-lg border px-4 py-2 text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-800",style:{borderColor:"rgba(0,0,0,.1)",color:h},children:"Reset"})]})]})]})})}let p="".concat(s.W,"/no-image.png"),b="#BF1E2E",y="#0B2C5C";function v(e){let{title:t,kicker:r}=e;return(0,a.jsxs)("div",{className:"mb-5",children:[r&&(0,a.jsx)("div",{className:"inline-block rounded-full px-3 py-1 text-xs font-semibold tracking-wide text-white",style:{backgroundColor:y},children:r}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-3",children:[(0,a.jsxs)("svg",{width:"28",height:"32",viewBox:"0 0 24 28","aria-hidden":!0,className:"drop-shadow-sm",children:[(0,a.jsx)("path",{d:"M12 0l10 4v8c0 7-5 12-10 16C7 24 2 19 2 12V4l10-4z",fill:b}),(0,a.jsx)("path",{d:"M12 3l7 2v6c0 5-4 9-7 12-3-3-7-7-7-12V5l7-2z",fill:"white",opacity:".95"}),(0,a.jsx)("path",{d:"M12 4.5l5 1.5v5c0 4-3.2 7-5 8.8-1.8-1.8-5-4.8-5-8.8v-5l5-1.5z",fill:y})]}),(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight",style:{color:y},children:t})]}),(0,a.jsx)("div",{className:"mt-2 h-1 rounded-full",style:{background:"linear-gradient(90deg, ".concat(b,", ").concat(y,")")}})]})}function j(e){let{children:t}=e,r=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18'><circle cx='1' cy='1' r='1' fill='".concat(y,"22'/></svg>"));return(0,a.jsx)("div",{className:"rounded-3xl p-6 sm:p-8 shadow-[0_10px_30px_rgba(0,0,0,.05)]",style:{backgroundImage:'url("data:image/svg+xml,'.concat(r,'")'),backgroundColor:"#fafbff"},children:t})}function w(e){let{children:t}=e;return(0,a.jsx)("span",{className:"rounded-full bg-white px-3 py-1 text-sm shadow-sm ring-1 ring-gray-200 dark:bg-gray-900 dark:ring-gray-800",children:t})}function N(){let e=(0,o.useSearchParams)(),t=(0,l.useMemo)(()=>{var t;return(null!=(t=e.get("q"))?t:"").trim()},[e]),r=(0,l.useMemo)(()=>{var t;return(null!=(t=e.get("location"))?t:"").trim()},[e]),s=(0,l.useMemo)(()=>{var t;return(null!=(t=e.get("date_from"))?t:"").trim()},[e]),n=(0,l.useMemo)(()=>{var t;return(null!=(t=e.get("date_to"))?t:"").trim()},[e]),g="oldest"===e.get("sort")?"oldest":"newest",h=(0,l.useMemo)(()=>{let t=e.getAll("category").filter(Boolean);if(0===t.length){let t=e.get("category");if(null==t?void 0:t.includes(","))return t.split(",").map(e=>e.trim()).filter(Boolean);if(t)return[t]}return t},[e]),x=(0,l.useMemo)(()=>m(h),[h]),[N,k]=(0,l.useState)([]),[C,_]=(0,l.useState)(!1),[S,I]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=!1;return(async()=>{var a;_(!0),I(null);let l=d.N.schema("public").from("items").select("id,title,location,category,date_found,photo_url,status").eq("status","listed");t&&(l=l.or("title.ilike.%".concat(t,"%,location.ilike.%").concat(t,"%,category.ilike.%").concat(t,"%"))),x.length&&(l=l.in("category",x)),r&&(l=l.ilike("location","%".concat(r,"%"))),s&&(l=l.gte("date_found",s)),n&&(l=l.lte("date_found",n)),l=l.order("date_found",{ascending:"oldest"===g,nullsFirst:!1});let{data:o,error:i}=await l;if(!e){if(i){I(i.message),_(!1);return}k(null!=(a=(null!=o?o:[]).map(e=>{var t,r,a,s;let l=p,o=null!=(t=e.photo_url)?t:null;if(o)if(/^https?:\/\//i.test(o))l=o;else{let{data:e}=d.N.storage.from("item-photos").getPublicUrl(o);l=(null==e?void 0:e.publicUrl)||p}return{id:String(e.id),title:String(null!=(r=e.title)?r:"Untitled"),location:String(null!=(a=e.location)?a:"—"),category:String(null!=(s=e.category)?s:"Misc"),date:e.date_found?new Date(e.date_found).toISOString().slice(0,10):"",thumb:l}}))?a:[]),_(!1)}})(),()=>{e=!0}},[t,x,r,s,n,g]);let M=t||x.length>0||r||s||n||"oldest"===g;return(0,a.jsx)("div",{className:"min-h-screen",style:{background:"linear-gradient(180deg, #0B2C5C0A 0%, #0B2C5C08 40%, #ffffff 100%)",backgroundImage:"radial-gradient(rgba(11,44,92,0.06) 1px, transparent 1px)",backgroundSize:"18px 18px"},children:(0,a.jsxs)("section",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10",children:[(0,a.jsx)(v,{title:"Browse Items",kicker:"Search"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[16rem_1fr] gap-6",children:[(0,a.jsx)(f,{initial:{q:t,category:x,location:r,date_from:s,date_to:n,sort:g}}),(0,a.jsx)(j,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",style:{color:y},children:"Results"}),M&&(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[t&&(0,a.jsxs)(w,{children:["q: “",t,"”"]}),x.map(e=>(0,a.jsx)(w,{children:e},"pill-".concat(u(e)))),r&&(0,a.jsx)(w,{children:r}),(s||n)&&(0,a.jsxs)(w,{children:[s||"…"," → ",n||"…"]}),(0,a.jsx)(i(),{href:"/search",className:"text-sm underline",style:{color:b},children:"Clear"})]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:C?"Searching…":"".concat(N.length," item").concat(1===N.length?"":"s"," found")}),S&&(0,a.jsxs)("div",{className:"rounded-lg border border-red-500/30 bg-red-50 p-3 text-sm text-red-700 dark:border-red-500/40 dark:bg-red-900/20 dark:text-red-200",children:["Error: ",S]}),C||S||0!==N.length?(0,a.jsx)("ul",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:N.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(c.I,{item:e})},e.id))}):(0,a.jsx)("div",{className:"grid place-items-center rounded-2xl border border-dashed border-gray-300 py-16 text-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-medium",children:"No items match your filters."}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Try adjusting your keywords or categories."}),(0,a.jsx)(i(),{href:"/search",className:"mt-4 inline-block rounded-lg px-4 py-2 text-white",style:{backgroundColor:b},children:"Clear filters"})]})})]})})]})]})})}},9526:(e,t,r)=>{Promise.resolve().then(r.bind(r,8532))}},e=>{e.O(0,[993,619,441,255,358],()=>e(e.s=9526)),_N_E=e.O()}]);