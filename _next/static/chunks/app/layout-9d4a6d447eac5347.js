(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{141:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s={src:"/school-lost-and-found//_next/static/media/cherry-creek-logo.ebdda876.png",height:273,width:253,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAMAAAAC2hU0AAAAQlBMVEU6KV4QXJoLXJ0daKWZFRkgbqyoDwqlERESXZx+ISkWWplmJkEPYqKmEg+iBgYxS39nHzgZVY0rR38AZLUAdtOdKS0002suAAAAFnRSTlMBmReLq3VEMy8jYGq3VHlOgm5SQim5B8dmMQAAAAlwSFlzAAALEwAACxMBAJqcGAAAADtJREFUeJwVyksWwCAIwMCoIKBt7ff+V+0jm9kEcK1krl4hyjaaR1raFfT5DJ0d++53iUGXU/b87TD4ASnPAXYTIld6AAAAAElFTkSuQmCC",blurWidth:7,blurHeight:8}},403:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var s=a(5155),r=a(5239),l=a(2619),n=a.n(l),i=a(141);function o(){return(0,s.jsx)("div",{className:"border-b border-gray-200 bg-white",children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between pl-0 pr-8 lg:pr-12 py-6",children:[(0,s.jsxs)(n(),{href:"/",className:"flex items-center gap-6 no-underline","aria-label":"Cherry Creek High School Home",children:[(0,s.jsx)(r.default,{src:i.A,alt:"Cherry Creek High School logo",className:"h-28 w-auto",priority:!0}),(0,s.jsxs)("div",{className:"leading-tight select-none",children:[(0,s.jsx)("div",{className:"text-4xl font-extrabold tracking-tight text-[#BF1E2E]",children:"CHERRY CREEK"}),(0,s.jsx)("div",{className:"text-3xl font-semibold text-[#BF1E2E]",children:"HIGH SCHOOL"})]})]}),(0,s.jsx)("div",{className:"hidden sm:block w-[100px]"})]})})}},1289:(e,t,a)=>{"use strict";a.d(t,{N:()=>s});let s=(0,a(1993).UU)("https://ogqjfeumqaaxorxrehxd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ncWpmZXVtcWFheG9yeHJlaHhkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzcxOTUsImV4cCI6MjA3NTUxMzE5NX0.5EgofBpIzK_MyB4fRnTSLCxP3nMCznR5PIJ3kD0xjPk")},3673:()=>{},4746:(e,t,a)=>{"use strict";a.d(t,{AuthUIProvider:()=>n,c:()=>i});var s=a(5155),r=a(2115);let l=(0,r.createContext)(null);function n(e){let{children:t}=e,[a,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null),d=(0,r.useMemo)(()=>({panelOpen:a,redirectTo:i,openPanel:e=>{"string"==typeof e&&o(e),n(!0)},closePanel:()=>n(!1),clearRedirect:()=>o(null),setRedirectTo:o}),[a,i]);return(0,s.jsx)(l.Provider,{value:d,children:t})}function i(){let e=(0,r.useContext)(l);if(!e)throw Error("useAuthUI must be used inside <AuthUIProvider />");return e}},5274:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(5155),r=a(2115),l=a(7650),n=a(1289);function i(e){var t;let{open:a,claim:i,onClose:o,meIsStaff:d,currentUid:c}=e,[u,m]=(0,r.useState)([]),[x,h]=(0,r.useState)(""),[f,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!1),y=(0,r.useRef)(null),w=(0,r.useRef)(null),j=null!=(t=null==i?void 0:i.id)?t:null,v=e=>d?"claimant"===e||"student"===e:"staff"===e;async function N(e){await n.N.rpc("mark_thread_seen",{p_claim_id:e,p_uid:c})}async function _(){if(!j)return;let e=x.trim();if(!e||p)return;b(!0),h("");let t=Date.now(),a={id:t,claim_id:j,sender_uid:c,sender_role:d?"staff":"claimant",body:e,created_at:new Date().toISOString(),seen_by_claimant:!d,seen_by_staff:!!d,_temp:!0,_error:null};m(e=>[...e,a]);let{data:s,error:r}=await n.N.from("claim_messages").insert({claim_id:j,sender_uid:c,sender_role:a.sender_role,body:e,seen_by_staff:!!d,seen_by_claimant:!d}).select("*").single();if(r||!s){m(e=>e.map(e=>e.id===t?{...e,_error:(null==r?void 0:r.message)||"Failed"}:e)),b(!1);return}m(e=>e.map(e=>e.id===t?s:e)),b(!1)}(0,r.useEffect)(()=>{if(!a)return;let e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}},[a]),(0,r.useEffect)(()=>{if(!a||!j)return;let e=!1;return(async()=>{let{data:t,error:a}=await n.N.from("claim_messages").select("*").eq("claim_id",j).order("created_at",{ascending:!0});e||a||!t||m(t),await N(j);let s=n.N.channel("claim_messages:".concat(j)).on("postgres_changes",{event:"INSERT",schema:"public",table:"claim_messages",filter:"claim_id=eq.".concat(j)},async e=>{let t=e.new;m(e=>[...e,t]),t.sender_uid!==c&&v(t.sender_role)&&await N(j)}).subscribe(t=>{e||"SUBSCRIBED"!==t||g(!0)});return()=>{n.N.removeChannel(s)}})(),()=>{e=!0,g(!1)}},[a,j,c,d]),(0,r.useEffect)(()=>{if(!a||!j||0===u.length)return;let e=u[u.length-1];e.sender_uid!==c&&v(e.sender_role)&&N(j)},[u.length,a,j,c]),(0,r.useEffect)(()=>{var e;null==(e=y.current)||e.scrollIntoView({block:"end"})},[u.length]),(0,r.useEffect)(()=>{var e;if(!a)return;null==(e=w.current)||e.focus();let t=e=>"Escape"===e.key&&o();return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[a,o]),(0,r.useLayoutEffect)(()=>{let e=w.current;e&&(e.style.height="0px",e.style.height=Math.min(120,e.scrollHeight)+"px")},[x]);let k=(0,r.useMemo)(()=>f?"Live":"Connecting…",[f]);if(!a||!i)return null;let C=(0,s.jsxs)("div",{className:"fixed inset-0 z-[1000]",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:o,"aria-hidden":"true"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"chat-modal-title",className:"   w-full max-w-lg   max-h-[min(90vh,800px)]   overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-2xl   grid grid-rows-[auto,1fr,auto]   ",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between bg-gradient-to-r from-[#b10015] to-[#0f2741] px-4 py-3 text-white",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsxs)("h3",{id:"chat-modal-title",className:"truncate text-base font-semibold",children:["Messages — Claim #",i.id," (Item #",i.item_id,")"]}),(0,s.jsx)("div",{className:"mt-0.5 truncate text-xs text-white/80",children:i.claimant_name||i.claimant_email||"Student"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-[11px] ".concat(f?"bg-white/20":"bg-white/10"),title:"Realtime status",children:[(0,s.jsx)("span",{className:"mr-1 inline-block h-2 w-2 rounded-full ".concat(f?"bg-emerald-300":"bg-amber-300 animate-pulse")}),k]}),(0,s.jsx)("button",{className:"rounded-full bg-white/10 px-3 py-1.5 text-sm text-white hover:bg-white/20",onClick:o,children:"Close"})]})]}),(0,s.jsx)("div",{className:"px-4 py-3 overflow-hidden",children:(0,s.jsxs)("div",{className:"h-full overflow-y-auto rounded-xl border bg-white p-3",style:{maxHeight:"56vh",scrollBehavior:"smooth"},children:[0===u.length&&(0,s.jsx)("div",{className:"py-8 text-center text-sm text-gray-500",children:"No messages yet."}),u.map(e=>{let t=e.sender_uid===c;return(0,s.jsx)("div",{className:"mb-2 flex ".concat(t?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"max-w-[75%] rounded-2xl px-3 py-2 text-sm shadow-sm ".concat(t?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:[(0,s.jsx)("div",{className:"whitespace-pre-wrap break-words",children:e.body}),(0,s.jsxs)("div",{className:"mt-1 text-[10px] ".concat(t?"text-white/80":"text-gray-500"),children:[function(e){let t=new Date(e);if(Number.isNaN(+t))return e;let a=new Date;return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate()?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleString()}(e.created_at),e._temp&&!e._error&&" \xb7 sending…",e._error&&(0,s.jsx)("span",{className:"ml-1 text-rose-400",children:"\xb7 failed"})]})]})},e.id)}),(0,s.jsx)("div",{ref:y})]})}),(0,s.jsxs)("div",{className:"border-t bg-white px-4 py-3",children:[(0,s.jsxs)("div",{className:"flex items-end gap-2",children:[(0,s.jsx)("textarea",{ref:w,value:x,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),p||_())},placeholder:"Type a message…  (Enter to send, Shift+Enter for newline)",className:"w-full resize-none rounded-xl border border-gray-300 bg-white px-3 py-2 text-sm   text-gray-900 placeholder-gray-500   focus:outline-none focus:ring-2 focus:ring-indigo-500",rows:1,maxLength:4e3}),(0,s.jsx)("button",{onClick:_,className:"rounded-xl bg-black px-4 py-2 text-sm font-medium text-white disabled:opacity-60",disabled:p||0===x.trim().length,children:p?"Sending…":"Send"})]}),(0,s.jsxs)("div",{className:"mt-1 flex items-center justify-between text-[11px] text-gray-500",children:[(0,s.jsxs)("span",{children:["Press ",(0,s.jsx)("kbd",{className:"rounded border px-1",children:"Enter"})," to send"]}),(0,s.jsxs)("span",{className:"text-gray-400",children:[x.length.toLocaleString(),"/4,000"]})]})]})]})})]});return(0,l.createPortal)(C,document.body)}},6324:(e,t,a)=>{"use strict";a.d(t,{Header:()=>p});var s=a(5155),r=a(2619),l=a.n(r),n=a(63),i=a(2115),o=a(6651),d=a(5229),c=a(1289),u=a(8661),m=a.n(u),x=a(5274);function h(){let[e,t]=(0,i.useState)(""),[a,r]=(0,i.useState)(null),[l,n]=(0,i.useState)(!1),[o,d]=(0,i.useState)([]),[u,h]=(0,i.useState)({}),[f,g]=(0,i.useState)({}),[p,b]=(0,i.useState)({}),[y,w]=(0,i.useState)({}),[j,v]=(0,i.useState)(!1),[N,_]=(0,i.useState)(null),[k,C]=(0,i.useState)(""),S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,[a,s]=(0,i.useState)(e);return(0,i.useEffect)(()=>{let a=setTimeout(()=>s(e),t);return()=>clearTimeout(a)},[e,t]),a}(k,200),[E,A]=(0,i.useState)("all"),[I,L]=(0,i.useState)(!1),[D,F]=(0,i.useState)("new"),[M,U]=(0,i.useState)(-1),R=(0,i.useRef)(null),B=(0,i.useRef)(null),q=(0,i.useRef)(null),P="admin"===a||"staff"===a;(0,i.useEffect)(()=>{(async()=>{var e,a,s;let{data:l}=await c.N.auth.getUser(),n=null!=(a=null==(e=l.user)?void 0:e.id)?a:"";if(t(n),!n)return;let{data:i}=await c.N.from("profiles").select("role").eq("uid",n).single();r(null!=(s=null==i?void 0:i.role)?s:"user")})()},[]),(0,i.useEffect)(()=>{if(!e||!a)return;let t=!0;return(async()=>{let a=c.N.from("claims").select("id,item_id,claimant_name,claimant_email,status,created_at,claimant_uid").order("created_at",{ascending:!1});P||(a=a.eq("claimant_uid",e));let{data:s,error:r}=await a;if(r||!s||!t)return;d(s.slice(0,300));let l={};for(let e of s)l[Number(e.id)]=e;h(l);let n=s.map(e=>Number(e.id));if(0===n.length){g({}),w({}),b({});return}let{data:i}=await c.N.from("claim_messages").select("id,claim_id,body,created_at,seen_by_claimant,seen_by_staff,sender_role").in("claim_id",n).order("created_at",{ascending:!1}),o={},u={},m={};(i||[]).forEach(e=>{let t=Number(e.claim_id);o[t]||(o[t]=e.body,u[t]=e.created_at);let a="claimant"===e.sender_role||"student"===e.sender_role;(P?!a||e.seen_by_staff:"staff"!==e.sender_role||e.seen_by_claimant)||(m[t]=(m[t]||0)+1)}),g(o),b(u),w(m)})(),()=>{t=!1}},[e,a,P]),(0,i.useEffect)(()=>{if(!e)return;let t=c.N.channel("claim_msg_portal_rx").on("postgres_changes",{event:"INSERT",schema:"public",table:"claim_messages"},t=>{let a=t.new,s=Number(a.claim_id);g(e=>({...e,[s]:a.body})),b(e=>({...e,[s]:a.created_at}));let r=a.sender_uid===e,l="claimant"===a.sender_role||"student"===a.sender_role,n=P?l:"staff"===a.sender_role;!r&&n&&w(e=>({...e,[s]:(e[s]||0)+1}))}).subscribe();return()=>{c.N.removeChannel(t)}},[e,P]);let H=(0,i.useCallback)(async e=>{let t=P?"seen_by_staff":"seen_by_claimant";await c.N.from("claim_messages").update({[t]:!0}).eq("claim_id",e).eq(t,!1)},[P]);function O(e){_(e),v(!0),w(t=>({...t,[Number(e.id)]:0})),H(Number(e.id)),n(!1)}let T=(0,i.useCallback)(async t=>{let a=u[t];if(a)return O(a);let s=c.N.from("claims").select("id,item_id,claimant_name,claimant_email,status,created_at,claimant_uid").eq("id",t).limit(1);P||(s=s.eq("claimant_uid",e));let{data:r}=await s;r&&r[0]&&O(r[0])},[u,e,P]);(0,i.useEffect)(()=>{let t=new URL(window.location.href);if(!t||!e||!a)return;let s=t.searchParams.get("openClaim"),r=t.searchParams.get("chat");if(s){let e=Number(s);Number.isNaN(e)||(n(!0),T(e))}else if("1"===r){let e=t.pathname.match(/\/claim\/(\d+)(?:\/|$)/);if(e){let t=Number(e[1]);Number.isNaN(t)||(n(!0),T(t))}}},[e,a,T]),(0,i.useEffect)(()=>{let e=e=>{let t=e.detail,a=Number(null==t?void 0:t.claimId);Number.isNaN(a)||(n(!0),T(a))};return window.addEventListener("cc:open-claim",e),()=>window.removeEventListener("cc:open-claim",e)},[T]),(0,i.useEffect)(()=>{if(!l)return;let e=e=>{var t,a;let s=e.target;(null==(t=B.current)||!t.contains(s))&&(null!=(a=R.current)&&a.contains(s)||n(!1))};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[l]);let z=(0,i.useMemo)(()=>{let e=S.trim().toLowerCase(),t=o.filter(t=>("all"===E||(t.status||"").toLowerCase()===E)&&(!I||!!y[Number(t.id)])&&(!e||["#".concat(t.id),t.claimant_name||"",t.claimant_email||"",String(t.item_id||""),t.status||""].join(" ").toLowerCase().includes(e)));return t.sort((e,t)=>{let a=Number(e.id),s=Number(t.id),r=p[a]||e.created_at,l=p[s]||t.created_at;if("unread"===D){let e=+!!y[a],t=+!!y[s];return t!==e?t-e:(l?+new Date(l):0)-(r?+new Date(r):0)}return"old"===D?(r?+new Date(r):0)-(l?+new Date(l):0):(l?+new Date(l):0)-(r?+new Date(r):0)}),t},[o,S,E,I,D,y,p]);(0,i.useEffect)(()=>{if(!l)return;let e=e=>{z.length&&("ArrowDown"===e.key?(e.preventDefault(),U(e=>Math.min(z.length-1,e+1))):"ArrowUp"===e.key?(e.preventDefault(),U(e=>Math.max(0,e-1))):"Enter"===e.key?M>=0&&O(z[M]):"Escape"===e.key&&n(!1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l,z,M]),(0,i.useEffect)(()=>{if(M<0||!q.current)return;let e=q.current.querySelectorAll("li")[M];null==e||e.scrollIntoView({block:"nearest"})},[M]);let J="\n    .messages-portal select,\n    .messages-portal input,\n    .messages-portal textarea { color:#111 !important; background:#fff !important; }\n    .messages-portal input::placeholder { color:#6b7280 !important; }\n    .messages-portal .avatar { background:linear-gradient(135deg,#f3f4f6,#e5e7eb); }\n  ";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m(),{id:J.__hash,children:J}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{ref:R,onClick:()=>{n(e=>!e),U(-1)},title:"Messages",className:"inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium border border-white/30 bg-white/10 hover:bg-white/20 text-white focus:outline-none focus:ring-2 focus:ring-white/60 transition",children:["Messages",Object.values(y).reduce((e,t)=>e+t,0)>0&&(0,s.jsx)("span",{className:"ml-2 rounded-full bg-red-600 px-2 py-0.5 text-xs text-white",children:Object.values(y).reduce((e,t)=>e+t,0)})]}),l&&(0,s.jsxs)("div",{ref:B,className:"messages-portal fixed right-4 top-16 z-[70] w-[420px] max-w-[92vw] overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b px-4 py-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:"Inbox"}),(0,s.jsx)("span",{className:"rounded-full bg-gray-100 px-2 py-0.5 text-[11px] text-gray-700",children:o.length})]}),(0,s.jsx)("button",{onClick:()=>n(!1),className:"rounded-full border border-gray-200 bg-white px-3 py-1.5 text-sm hover:bg-gray-50",children:"Close"})]}),(0,s.jsxs)("div",{className:"sticky top-0 space-y-2 border-b bg-white px-4 py-3",children:[(0,s.jsx)("input",{placeholder:"Search (name, email, #id, status)…",value:k,onChange:e=>C(e.target.value),className:"w-full rounded-xl border border-gray-200 px-3 py-1.5 text-sm text-gray-900 placeholder-gray-500"}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[["all","pending","approved","rejected"].map(e=>(0,s.jsx)("button",{onClick:()=>A(e),style:E===e?{background:"linear-gradient(135deg, #b10015 0%, #0f2741 100%)"}:void 0,className:["rounded-full px-3 py-1 text-xs border",E===e?"text-white border-transparent":"text-gray-700 border-gray-200 bg-white hover:bg-gray-50"].join(" ")||"",children:e[0].toUpperCase()+e.slice(1)},e)),(0,s.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,s.jsxs)("label",{className:"inline-flex cursor-pointer items-center gap-2 text-xs text-gray-700",children:[(0,s.jsx)("input",{type:"checkbox",checked:I,onChange:e=>L(e.target.checked),className:"h-4 w-4"}),"Unread only"]}),(0,s.jsxs)("select",{value:D,onChange:e=>F(e.target.value),className:"rounded-lg border border-gray-200 bg-white px-2 py-1 text-xs text-gray-900",children:[(0,s.jsx)("option",{value:"new",children:"Newest activity"}),(0,s.jsx)("option",{value:"old",children:"Oldest activity"}),(0,s.jsx)("option",{value:"unread",children:"Unread first"})]})]})]})]}),(0,s.jsxs)("div",{className:"max-h-[65vh] overflow-auto",children:[!z.length&&(0,s.jsx)("div",{className:"px-4 py-10 text-center text-sm text-gray-500",children:"No conversations."}),(0,s.jsx)("ul",{ref:q,className:"divide-y divide-gray-100",children:z.map((e,t)=>{let a=Number(e.id),r=f[a]||"No messages yet",l=y[a]||0,n=P?e.claimant_name||e.claimant_email||"Student":"Staff • Claim #".concat(a),i=function(e,t){let a=(null!=e?e:"").trim();if(a)return a.split(/\s+/).slice(0,2).map(e=>{var t;return(null==(t=e[0])?void 0:t.toUpperCase())||""}).join("")||"U";let s=(null!=t?t:"").trim();return s?s[0].toUpperCase():"U"}(e.claimant_name,e.claimant_email),o=p[a]||e.created_at||"",d=t===M;return(0,s.jsx)("li",{children:(0,s.jsxs)("button",{onClick:()=>O(e),className:["flex w-full items-center gap-3 px-4 py-3 text-left",d?"bg-indigo-50":"hover:bg-gray-50"].join(" ")||"",children:[(0,s.jsx)("div",{className:"avatar flex h-9 w-9 shrink-0 items-center justify-center rounded-full border border-gray-200 text-[12px] font-semibold text-gray-700",children:i}),(0,s.jsxs)("div",{className:"min-w-0 grow",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"truncate text-sm font-semibold text-gray-900",children:n}),P&&(0,s.jsx)("span",{className:"shrink-0 rounded-full px-2 py-0.5 text-[11px] ".concat(function(e){let t=(null!=e?e:"").toLowerCase();return"pending"===t?"bg-amber-100 text-amber-800":"approved"===t?"bg-emerald-100 text-emerald-800":"rejected"===t?"bg-rose-100 text-rose-800":"claimed"===t?"bg-violet-100 text-violet-800":"listed"===t?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-700"}(e.status)),children:e.status||"—"}),(0,s.jsx)("span",{className:"ml-auto text-[11px] text-gray-500",children:function(e){if(!e)return"";let t=Math.max(1,Math.floor((Date.now()-new Date(e).getTime())/1e3)),a=Math.floor(t/60),s=Math.floor(a/60),r=Math.floor(s/24);return r>6?new Date(e).toLocaleDateString():r>=1?"".concat(r,"d"):s>=1?"".concat(s,"h"):a>=1?"".concat(a,"m"):"".concat(t,"s")}(o)})]}),P&&e.claimant_email&&(0,s.jsx)("div",{className:"truncate text-[11px] text-gray-500",children:e.claimant_email}),(0,s.jsx)("div",{className:"truncate text-xs text-gray-600",children:r})]}),(0,s.jsxs)("div",{className:"ml-2 shrink-0 space-y-1 text-right",children:[(0,s.jsxs)("div",{className:"rounded-full bg-gray-100 px-2 py-0.5 text-[11px] text-gray-700",children:["#",a]}),l>0&&(0,s.jsx)("div",{className:"rounded-full bg-red-600 px-2 py-0.5 text-[11px] font-semibold text-white",children:l})]})]})},a)})})]})]})]}),j&&N&&(0,s.jsx)(x.A,{open:j,claim:N,onClose:()=>v(!1),meIsStaff:P,currentUid:e})]})}var f=a(4746);let g="cc-lostfound-notice:nextShowAt:v1";function p(){let e=(0,n.usePathname)(),t=(0,n.useRouter)(),[a,r]=(0,i.useState)(!1),[u,m]=(0,i.useState)(null),[x,p]=(0,i.useState)(!1),[b,y]=(0,i.useState)("loading"),[w,j]=(0,i.useState)(null),[v,N]=(0,i.useState)(null),{panelOpen:_,openPanel:k,closePanel:C,redirectTo:S,clearRedirect:E}=(0,f.c)(),A=(0,i.useRef)(null),[I,L]=(0,i.useState)(""),[D,F]=(0,i.useState)(""),[M,U]=(0,i.useState)(!1),[R,B]=(0,i.useState)(null);function q(e){if("authed"===b)return void t.push(e);k(e)}async function P(e){var a,s;e.preventDefault(),B(null),U(!0);let{error:r}=await c.N.auth.signInWithPassword({email:I.trim(),password:D});if(U(!1),r)return void B(r.message);let{data:l}=await c.N.auth.getUser(),n=null==(a=l.user)?void 0:a.id;if(n){let{data:e}=await c.N.from("profiles").select("role").eq("uid",n).single();N(null!=(s=null==e?void 0:e.role)?s:"user")}L(""),F(""),C(),S&&(E(),t.push(S))}async function H(){await c.N.auth.signOut(),N(null),j(null),y("guest"),t.push("/")}(0,i.useEffect)(()=>{let e=()=>r(window.scrollY>6);return e(),window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[]),(0,i.useEffect)(()=>{m(function(){let e=window.localStorage.getItem(g);if(!e)return!0;let t=parseInt(e,10)||0;return Date.now()>=t}())},[]),(0,i.useEffect)(()=>{let e=document.getElementById("school-logo");if(!e)return;let t=new IntersectionObserver(e=>{let[t]=e;p(!t.isIntersecting)},{root:null,threshold:.01});return t.observe(e),()=>t.disconnect()},[]),(0,i.useEffect)(()=>{(async()=>{var e,t,a,s;let{data:r}=await c.N.auth.getSession(),l=null!=(t=null==(e=r.session)?void 0:e.user)?t:null;if(y(l?"authed":"guest"),j(null!=(a=null==l?void 0:l.email)?a:null),!l)return N(null);let{data:n}=await c.N.from("profiles").select("role").eq("uid",l.id).single();N(null!=(s=null==n?void 0:n.role)?s:"user")})();let{data:e}=c.N.auth.onAuthStateChange(async(e,t)=>{var a,s,r;let l=null!=(a=null==t?void 0:t.user)?a:null;if(y(l?"authed":"guest"),j(null!=(s=null==l?void 0:l.email)?s:null),!l)return void N(null);C();let{data:n}=await c.N.from("profiles").select("role").eq("uid",l.id).single();N(null!=(r=null==n?void 0:n.role)?r:"user")});return()=>e.subscription.unsubscribe()},[C]),(0,i.useEffect)(()=>{if(_)return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e);function e(e){A.current&&(A.current.contains(e.target)||C())}},[_,C]);let O=(0,i.useMemo)(()=>[{href:"/",label:"Lost & Found",guard:!1},{href:"/report",label:"Report Found Item",guard:!0},{href:"/admin",label:"Admin",guard:!1}],[]);return(0,s.jsxs)(s.Fragment,{children:[x&&(0,s.jsx)("div",{"aria-hidden":"true",style:{height:a?56:64}}),(0,s.jsxs)("header",{className:[x?"fixed":"relative","top-0 left-0 right-0 z-[9999] w-full text-white transition-all duration-300",a?"shadow-[0_6px_18px_rgba(0,0,0,.18)]":"shadow-[0_10px_28px_rgba(0,0,0,.12)]"].join(" "),style:{background:"linear-gradient(180deg, rgba(191,30,46,0.985) 0%, rgba(168,21,36,0.985) 100%)",borderBottom:"1px solid rgba(0,0,0,.18)"},children:[(0,s.jsxs)("div",{className:["mx-auto flex max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8",a?"h-14":"h-16"].join(" "),children:[(0,s.jsxs)("div",{className:"flex items-center gap-7",children:[(0,s.jsxs)(l(),{href:"/",className:"group flex items-center gap-3 rounded-lg px-2 py-1 transition no-underline decoration-0","aria-label":"Cherry Creek Lost & Found Home",children:[(0,s.jsx)("span",{className:"text-2xl leading-none",children:"\uD83C\uDF92"}),(0,s.jsxs)("div",{className:"leading-tight",children:[(0,s.jsx)("div",{className:"text-[16px] font-extrabold tracking-tight",children:"Cherry Creek"}),(0,s.jsx)("div",{className:"text-[12px] font-medium text-white/90",children:"Lost & Found"})]})]}),(0,s.jsx)("nav",{className:"hidden md:flex items-center gap-1.5",children:O.map(t=>{let a=e===t.href;return t.guard?(0,s.jsxs)("button",{type:"button",onClick:()=>q(t.href),"aria-current":a?"page":void 0,className:["relative group rounded-full px-4 py-2 text-sm font-semibold transition",a?"bg-yellow-400 text-red-900 shadow-[inset_0_-2px_0_rgba(0,0,0,.25)]":"text-white/90 hover:bg-white/15 hover:text-white"].join(" "),children:[t.label,(0,s.jsx)("span",{className:["pointer-events-none absolute left-1/2 -translate-x-1/2 -bottom-1 h-[3px] w-10 rounded-full transition-all",a?"opacity-100 scale-100":"opacity-0 scale-50 group-hover:opacity-100 group-hover:scale-100"].join(" "),style:{backgroundColor:a?"#6E0F16":"rgba(255,255,255,.9)"}})]},t.href):(0,s.jsxs)(l(),{href:t.href,"aria-current":a?"page":void 0,className:["relative group rounded-full px-4 py-2 text-sm font-semibold transition no-underline decoration-0",a?"bg-yellow-400 text-red-900 shadow-[inset_0_-2px_0_rgba(0,0,0,.25)]":"text-white/90 hover:bg-white/15 hover:text-white"].join(" "),children:[t.label,(0,s.jsx)("span",{className:["pointer-events-none absolute left-1/2 -translate-x-1/2 -bottom-1 h-[3px] w-10 rounded-full transition-all",a?"opacity-100 scale-100":"opacity-0 scale-50 group-hover:opacity-100 group-hover:scale-100"].join(" "),style:{backgroundColor:a?"#6E0F16":"rgba(255,255,255,.9)"}})]},t.href)})})]}),(0,s.jsxs)("div",{className:"relative flex items-center gap-3",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>q("/search"),className:"inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium border border-white/30 bg-white/10 hover:bg-white/18 focus:outline-none focus:ring-2 focus:ring-white/60 transition","aria-label":"Search items",title:"Search items",children:[(0,s.jsx)(o.A,{size:18}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Search"})]}),"loading"===b&&(0,s.jsx)("span",{className:"rounded-full px-3 py-2 text-sm border border-white/30 bg-white/10",children:"Checking…"}),"guest"===b&&(0,s.jsxs)("div",{className:"relative",ref:A,children:[(0,s.jsx)("button",{type:"button",onClick:()=>_?C():k(),className:"inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium border border-white/30 bg-white/10 hover:bg-white/18 focus:outline-none focus:ring-2 focus:ring-white/60 transition","aria-expanded":_,"aria-controls":"login-panel",children:"Sign in"}),_&&(0,s.jsxs)("div",{id:"login-panel",className:"absolute right-0 mt-2 w-80 rounded-2xl border border-white/25 bg-white/95 text-gray-900 shadow-xl backdrop-blur p-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-800",children:"Sign in to continue"}),(0,s.jsxs)("p",{className:"mt-1 text-xs text-gray-600",children:["Use your ",(0,s.jsx)("b",{children:"@cherrycreekschools.org"})," email."]}),(0,s.jsxs)("form",{onSubmit:P,className:"mt-3 space-y-2",children:[(0,s.jsx)("input",{type:"email",value:I,onChange:e=>L(e.target.value),placeholder:"you@cherrycreekschools.org",required:!0,className:"w-full rounded-xl border border-gray-300 px-3 py-2 text-sm outline-none focus:ring-2"}),(0,s.jsx)("input",{type:"password",value:D,onChange:e=>F(e.target.value),placeholder:"Password",required:!0,className:"w-full rounded-xl border border-gray-300 px-3 py-2 text-sm outline-none focus:ring-2"}),R&&(0,s.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-xs text-red-700",children:R}),(0,s.jsx)("button",{type:"submit",disabled:M,className:"w-full rounded-xl bg-[#BF1E2E] px-4 py-2 text-sm font-semibold text-white shadow-sm transition active:scale-[0.99] disabled:opacity-60",children:M?"Signing in…":"Sign In"})]}),(0,s.jsx)("button",{className:"absolute right-2 top-2 rounded p-1 text-gray-500 hover:bg-gray-100","aria-label":"Close",onClick:C,children:(0,s.jsx)(d.A,{size:16})})]})]}),"authed"===b&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h,{}),(0,s.jsx)("span",{className:"max-w-[170px] truncate rounded-full border border-white/30 bg-white/10 px-3 py-2 text-sm",title:null!=w?w:"",children:w}),(0,s.jsx)("button",{onClick:H,className:"rounded-full border border-white/30 bg-white/10 px-3 py-2 text-sm hover:bg-white/18 transition",title:"Sign out",children:"Log out"})]})]})]}),(0,s.jsx)("div",{className:"h-0.5 w-full",style:{backgroundColor:"".concat("#0B2C5C","EE")}})]}),(0,s.jsx)("div",{className:"h-8 w-full shadow-[inset_0_-1px_0_rgba(0,0,0,.08)]",style:{background:"repeating-linear-gradient(135deg, #BF1E2E 0 16px, #0B2C5C 16px 32px)"}}),!0===u&&(0,s.jsxs)("div",{role:"region","aria-label":"Important notice",className:"relative bg-yellow-50 border-y border-yellow-200 text-center text-sm sm:text-base text-yellow-900 py-2 pl-4 pr-12 shadow-sm transition-opacity duration-300 ease-out",children:["⚠️ ",(0,s.jsx)("span",{className:"font-semibold",children:"Important Notice:"})," Items unclaimed after ",(0,s.jsx)("strong",{children:"60 days"})," may be donated or disposed of according to school policy.",(0,s.jsx)("button",{type:"button","aria-label":"Dismiss important notice",onClick:()=>{m(!1);try{window.localStorage.setItem(g,String(Date.now()+864e5))}catch(e){}},className:"absolute right-2 top-1/2 -translate-y-1/2 inline-flex items-center justify-center rounded-md p-2 text-yellow-900/80 hover:text-yellow-900 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-400/60 transition",title:"Dismiss",children:(0,s.jsx)(d.A,{size:18,"aria-hidden":"true"})})]})]})}},7723:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,3673,23)),Promise.resolve().then(a.bind(a,4746)),Promise.resolve().then(a.bind(a,8455)),Promise.resolve().then(a.bind(a,6324)),Promise.resolve().then(a.bind(a,403))},8455:(e,t,a)=>{"use strict";a.d(t,{default:()=>m});var s=a(5155),r=a(8661),l=a.n(r),n=a(5239),i=a(2619),o=a.n(i),d=a(2115),c=a(141);let u="#1E407A";function m(){let e=(0,d.useMemo)(()=>new Date().getFullYear(),[]),t="color-mix(in oklab, ".concat("#0B2C5C"," 88%, white)");return(0,s.jsxs)("footer",{"aria-label":"Site footer",className:"jsx-8d2a43ac80041e0d mt-16 border-t border-black/10 bg-white text-gray-700 dark:border-white/10 dark:bg-neutral-900 dark:text-neutral-200",children:[(0,s.jsx)("div",{style:{background:"linear-gradient(90deg,#BF1E2E 0%,#0B2C5C 100%)"},"aria-hidden":"true",className:"jsx-8d2a43ac80041e0d h-1 w-full"}),(0,s.jsxs)("div",{className:"jsx-8d2a43ac80041e0d mx-auto max-w-7xl px-4 py-10 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"jsx-8d2a43ac80041e0d grid gap-12 md:grid-cols-[1.2fr_1fr_1fr] md:items-start",children:[(0,s.jsxs)("section",{"aria-labelledby":"footer-branding",className:"jsx-8d2a43ac80041e0d",children:[(0,s.jsx)("h2",{id:"footer-branding",className:"jsx-8d2a43ac80041e0d sr-only",children:"About this site"}),(0,s.jsxs)("div",{className:"jsx-8d2a43ac80041e0d flex items-start gap-4",children:[(0,s.jsx)(o(),{href:"/",className:"shrink-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2",style:{"--tw-ring-color":t},children:(0,s.jsx)(n.default,{src:c.A,alt:"Cherry Creek High School logo",width:88,height:88,className:"h-22 w-22 rounded-md",priority:!0})}),(0,s.jsxs)("div",{className:"jsx-8d2a43ac80041e0d max-w-prose",children:[(0,s.jsx)("p",{className:"jsx-8d2a43ac80041e0d text-lg font-extrabold text-gray-900 dark:text-white",children:"Cherry Creek HS — Lost & Found"}),(0,s.jsx)("p",{className:"jsx-8d2a43ac80041e0d mt-1 text-sm text-gray-600 dark:text-neutral-400",children:"Find or return lost items quickly and securely."}),(0,s.jsxs)("dl",{className:"jsx-8d2a43ac80041e0d mt-3 text-sm",children:[(0,s.jsxs)("div",{className:"jsx-8d2a43ac80041e0d mt-1",children:[(0,s.jsx)("dt",{className:"jsx-8d2a43ac80041e0d inline font-medium",children:"Pickup:"})," ",(0,s.jsx)("dd",{className:"jsx-8d2a43ac80041e0d inline",children:"Main Office \xb7 Mon–Fri, 7:30a–3:30p"})]}),(0,s.jsxs)("div",{className:"jsx-8d2a43ac80041e0d mt-1",children:[(0,s.jsx)("dt",{className:"jsx-8d2a43ac80041e0d inline font-medium",children:"Contact:"})," ",(0,s.jsx)("dd",{className:"jsx-8d2a43ac80041e0d inline",children:(0,s.jsx)(o(),{href:"mailto:lostfound@cherrycreekschools.org",className:"underline underline-offset-2 hover:no-underline focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-md",style:{"--tw-ring-color":t},children:"lostfound@cherrycreekschools.org"})})]})]})]})]})]}),(0,s.jsxs)("nav",{"aria-labelledby":"footer-help",className:"jsx-8d2a43ac80041e0d text-sm",children:[(0,s.jsx)("h2",{id:"footer-help",className:"jsx-8d2a43ac80041e0d font-semibold text-gray-900 dark:text-white",children:"Help"}),(0,s.jsx)("ul",{className:"jsx-8d2a43ac80041e0d mt-3 space-y-2",children:[["FAQ","/faq"],["Help Center","/help"],["Accessibility","/accessibility"],["Contact","/contact"]].map(e=>{let[a,r]=e;return(0,s.jsx)("li",{className:"jsx-8d2a43ac80041e0d",children:(0,s.jsx)(o(),{href:r,className:"rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 underline-offset-2 hover:underline",style:{"--tw-ring-color":t,color:"oklch(35% 0.06 255)"},children:a})},r)})})]}),(0,s.jsxs)("nav",{"aria-labelledby":"footer-policies",className:"jsx-8d2a43ac80041e0d text-sm",children:[(0,s.jsx)("h2",{id:"footer-policies",className:"jsx-8d2a43ac80041e0d font-semibold text-gray-900 dark:text-white",children:"Policies"}),(0,s.jsx)("ul",{className:"jsx-8d2a43ac80041e0d mt-3 space-y-2",children:[["Privacy","/privacy"],["Terms of Use","/terms"],["Safety & Reporting","/safety"]].map(e=>{let[a,r]=e;return(0,s.jsx)("li",{className:"jsx-8d2a43ac80041e0d",children:(0,s.jsx)(o(),{href:r,className:"rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 underline-offset-2 hover:underline",style:{"--tw-ring-color":t},children:a})},r)})})]})]}),(0,s.jsx)("div",{"aria-hidden":"true",className:"jsx-8d2a43ac80041e0d my-8 h-px w-full bg-gray-200 dark:bg-neutral-800"}),(0,s.jsxs)("div",{className:"jsx-8d2a43ac80041e0d flex flex-col items-start justify-between gap-3 md:flex-row md:items-center",children:[(0,s.jsx)("nav",{"aria-label":"Footer quick actions",className:"jsx-8d2a43ac80041e0d text-sm",children:(0,s.jsxs)("ul",{className:"jsx-8d2a43ac80041e0d flex flex-wrap items-center gap-x-5 gap-y-2",children:[(0,s.jsx)("li",{className:"jsx-8d2a43ac80041e0d",children:(0,s.jsx)(o(),{href:"/report",className:"rounded-md px-3 py-1.5 font-medium text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:"#BF1E2E","--tw-ring-color":t},children:"Report Found Item"})}),(0,s.jsx)("li",{className:"jsx-8d2a43ac80041e0d",children:(0,s.jsx)(o(),{href:"/search",className:"rounded-md underline underline-offset-2 hover:no-underline focus:outline-none focus:ring-2 focus:ring-offset-2",style:{"--tw-ring-color":t},children:"Browse Items"})}),(0,s.jsx)("li",{"aria-hidden":!0,className:"jsx-8d2a43ac80041e0d h-5 w-px bg-gray-300 dark:bg-neutral-700"}),(0,s.jsx)("li",{className:"jsx-8d2a43ac80041e0d",children:(0,s.jsx)("a",{href:"#top",style:{"--tw-ring-color":t},className:"jsx-8d2a43ac80041e0d rounded-md underline underline-offset-2 hover:no-underline focus:outline-none focus:ring-2 focus:ring-offset-2",children:"Back to top"})})]})}),(0,s.jsxs)("p",{className:"jsx-8d2a43ac80041e0d text-xs text-gray-500 dark:text-neutral-500",children:["\xa9 ",e," Cherry Creek High School. All rights reserved."]})]})]}),(0,s.jsx)("script",{type:"application/ld+json",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org","@type":"Organization",name:"Cherry Creek High School Lost & Found",email:"lostfound@cherrycreekschools.org",url:"https://your-domain.example",logo:"/images/cherry-creek-logo.png"})},className:"jsx-8d2a43ac80041e0d"}),(0,s.jsx)(l(),{id:"8d2a43ac80041e0d",children:"@media(prefers-color-scheme:dark){footer a{color:".concat(u,"}footer a:hover{color:").concat(u,";text-decoration:underline}}")})]})}}},e=>{e.O(0,[978,993,619,456,441,255,358],()=>e(e.s=7723)),_N_E=e.O()}]);