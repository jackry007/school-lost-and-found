(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{329:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var s=r(5155),l=r(2115);let a=(0,r(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var i=r(7650);function n(e){var t;let{item:r}=e,[n,d]=l.useState(!1),[o,c]=l.useState(!1),m=l.useRef(null);return l.useEffect(()=>c(!0),[]),l.useEffect(()=>{n&&m.current&&m.current.focus()},[n]),l.useEffect(()=>{if(!n)return;let e=e=>"Escape"===e.key&&d(!1);return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("article",{role:"button",tabIndex:0,onClick:()=>d(!0),onKeyDown:e=>"Enter"===e.key&&d(!0),className:"group relative flex flex-col overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm outline-none transition hover:-translate-y-0.5 hover:shadow-md dark:border-gray-800 dark:bg-gray-950 cursor-pointer","aria-label":"View details for ".concat(r.title),children:[(0,s.jsx)("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100 dark:bg-gray-900",children:r.thumb?(0,s.jsx)("img",{src:r.thumb,alt:r.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}):(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center text-sm text-gray-500 dark:text-gray-400",children:"No image"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 p-4",children:[(0,s.jsx)("h3",{className:"line-clamp-1 font-medium leading-tight text-gray-900 dark:text-gray-100",children:r.title}),(0,s.jsxs)("p",{className:"line-clamp-1 text-sm text-gray-600 dark:text-gray-400",children:[r.location," • ",r.category]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Found ",new Date(r.date).toLocaleDateString()]})]})]}),o&&n&&(0,i.createPortal)((0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onMouseDown:e=>e.target===e.currentTarget&&d(!1),children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:"relative z-10 grid w-[min(90vw,900px)] max-h-[90vh] grid-cols-1 overflow-hidden rounded-2xl bg-white shadow-2xl dark:bg-gray-950 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"relative group overflow-hidden bg-gray-100 dark:bg-gray-900",children:[r.thumb?(0,s.jsx)("img",{src:r.thumb,alt:r.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"}):(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center text-gray-500",children:"No image"}),(0,s.jsx)("button",{ref:m,onClick:()=>d(!1),className:"absolute right-3 top-3 inline-flex h-9 w-9 items-center justify-center rounded-full bg-black/60 text-white transition hover:bg-black/80 focus-visible:ring-2 focus-visible:ring-white","aria-label":"Close",children:(0,s.jsx)(a,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 p-5 md:p-6 overflow-y-auto",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold tracking-tight md:text-2xl",children:r.title}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:[r.location," • ",r.category]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Found ",new Date(r.date).toLocaleDateString()]})]}),(0,s.jsxs)("div",{className:"prose max-w-none prose-p:my-3 dark:prose-invert",children:[(0,s.jsx)("h3",{className:"mb-1 text-base font-medium",children:"Description"}),(0,s.jsx)("p",{className:"text-sm leading-6",children:(null==(t=r.description)?void 0:t.trim())||"No description provided."})]}),(0,s.jsx)("div",{className:"mt-auto",children:(0,s.jsx)("button",{onClick:()=>alert("Claim flow here"),className:"rounded-xl bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:"Start claim"})})]})]})]}),document.body)]})}},923:(e,t,r)=>{Promise.resolve().then(r.bind(r,9547))},1289:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});let s=(0,r(1993).UU)("https://ogqjfeumqaaxorxrehxd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ncWpmZXVtcWFheG9yeHJlaHhkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzcxOTUsImV4cCI6MjA3NTUxMzE5NX0.5EgofBpIzK_MyB4fRnTSLCxP3nMCznR5PIJ3kD0xjPk")},9547:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5155),l=r(2115),a=r(2619),i=r.n(a),n=r(329),d=r(1289);let o="/no-image.png",c=["All","Clothing","Electronics","Accessories","Bags","Books","Keys","IDs / Cards","Misc"];function m(){let[e,t]=(0,l.useState)([]),[r,a]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{let{data:e,error:r}=await d.N.schema("public").from("items").select("id, title, location_found, category, date_found, photo_url, status").order("date_found",{ascending:!1,nullsFirst:!1}).order("id",{ascending:!1}).limit(12);if(r)return a(r.message);t((null!=e?e:[]).map(e=>{var t,r,s,l;let a=o,i=null!=(t=e.photo_url)?t:null;if(i)if(/^https?:\/\//i.test(i))a=i;else{let{data:e}=d.N.storage.from("item-photos").getPublicUrl(i);a=(null==e?void 0:e.publicUrl)||o}return{id:String(e.id),title:String(null!=(r=e.title)?r:"Untitled"),location:String(null!=(s=e.location_found)?s:"—"),category:String(null!=(l=e.category)?l:"Misc"),date:new Date(e.date_found).toISOString().slice(0,10),thumb:a}})),a(null)})()},[]);let m=e.length>0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("section",{className:"mb-8 rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-gray-900",children:(0,s.jsxs)("div",{className:"flex flex-col gap-6 md:flex-row md:items-end md:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Find your stuff fast"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Search recent found items or submit a quick report when you find something."}),(0,s.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,s.jsx)(i(),{href:"/report",className:"btn",children:"Report Found Item"}),(0,s.jsx)(i(),{href:"/search",className:"btn btn-outline",children:"Browse Items"})]})]}),(0,s.jsx)("form",{action:"/search",className:"w-full md:w-[520px]",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row",children:[(0,s.jsxs)("div",{className:"sm:w-48",children:[(0,s.jsx)("label",{htmlFor:"category",className:"sr-only",children:"Category"}),(0,s.jsx)("select",{id:"category",name:"category",defaultValue:"",className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm outline-none transition focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:bg-gray-900 dark:border-gray-700",children:c.map(e=>(0,s.jsx)("option",{value:"All"===e?"":e,children:e},e))})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{htmlFor:"q",className:"sr-only",children:"Search items"}),(0,s.jsx)("input",{id:"q",name:"q",placeholder:"Search by name, color, location...",className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm outline-none transition focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:bg-gray-900 dark:border-gray-700"})]}),(0,s.jsx)("button",{type:"submit",className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700",children:"Search"})]})})]})}),r&&(0,s.jsxs)("div",{className:"mb-4 rounded-lg border border-red-600/40 bg-red-900/10 p-3 text-sm text-red-400",children:["Supabase error: ",r]}),m?(0,s.jsxs)("section",{children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-medium",children:"Recently reported"}),(0,s.jsx)(i(),{href:"/search",className:"text-sm underline",children:"View all"})]}),(0,s.jsx)("ul",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,s.jsx)("li",{children:(0,s.jsx)(n.I,{item:e})},e.id))})]}):(0,s.jsx)("section",{className:"grid place-items-center rounded-2xl border border-dashed border-gray-300 py-20 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-lg font-medium",children:"No items yet"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Be the first to add a found item so we can get it back to its owner."}),(0,s.jsx)(i(),{href:"/report",className:"btn mt-4",children:"Report an Item"})]})})]})}}},e=>{e.O(0,[993,297,441,255,358],()=>e(e.s=923)),_N_E=e.O()}]);