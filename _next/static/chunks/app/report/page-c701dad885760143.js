(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81,731],{63:(e,r,t)=>{"use strict";var a=t(7260);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},1289:(e,r,t)=>{"use strict";t.d(r,{N:()=>a});let a=(0,t(1993).UU)("https://ogqjfeumqaaxorxrehxd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ncWpmZXVtcWFheG9yeHJlaHhkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzcxOTUsImV4cCI6MjA3NTUxMzE5NX0.5EgofBpIzK_MyB4fRnTSLCxP3nMCznR5PIJ3kD0xjPk")},6230:(e,r,t)=>{"use strict";t.d(r,{default:()=>g});var a=t(5155),s=t(2115),o=t(63),l=t(1289);let i=["Clothing","Electronics","Accessories","Bags","Books","Keys","IDs / Cards","Bottle","Misc"],n="#BF1E2E",d="#0B2C5C",c=["image/jpeg","image/png","image/webp","image/heic","image/heif"];function g(){let e=(0,o.useRouter)(),[r,t]=(0,s.useState)(!1),[g,m]=(0,s.useState)(null),[u,b]=(0,s.useState)(null);async function h(r){r.preventDefault(),m(null),t(!0);let a=new FormData(r.currentTarget),s=String(a.get("title")||"").trim(),o=String(a.get("location_found")||"").trim(),i=String(a.get("category")||"Misc").trim()||"Misc",n=String(a.get("date_found")||"").trim(),d=String(a.get("notes")||"").trim(),g=a.get("photo");if(!s){m("Please enter a title."),t(!1);return}if(!n){m("Please select the date the item was found."),t(!1);return}if(g&&g.size>0){let e=g.size/1048576;if(e>5){m("Image is too large (".concat(e.toFixed(1)," MB). Max ").concat(5," MB.")),t(!1);return}if(c.length&&g.type&&!c.includes(g.type)){m("Unsupported image type. Please upload JPG/PNG/WebP/HEIC."),t(!1);return}}let u=null;if(g&&g.size>0)try{let e=(g.name.split(".").pop()||"jpg").toLowerCase(),r="public/".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2),".").concat(e),{error:t}=await l.N.storage.from("item-photos").upload(r,g,{cacheControl:"3600",upsert:!1,contentType:g.type||void 0});if(t)throw t;u=r}catch(e){m("Photo upload failed: ".concat((null==e?void 0:e.message)||e)),t(!1);return}try{let{error:e}=await l.N.from("items").insert([{title:s,location_found:o,category:i,date_found:n,status:"listed",photo_url:u,notes:d}]);if(e)throw e}catch(e){m("Could not save item: ".concat((null==e?void 0:e.message)||e)),t(!1);return}e.push("/?posted=1")}let p=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18'><circle cx='1' cy='1' r='1' fill='".concat(d,"22'/></svg>"));return(0,a.jsxs)("section",{className:"mx-auto max-w-3xl",children:[(0,a.jsxs)("div",{className:"mb-5 flex items-center gap-2",children:[(0,a.jsxs)("svg",{width:"28",height:"32",viewBox:"0 0 24 28","aria-hidden":!0,children:[(0,a.jsx)("path",{d:"M12 0l10 4v8c0 7-5 12-10 16C7 24 2 19 2 12V4l10-4z",fill:n}),(0,a.jsx)("path",{d:"M12 3l7 2v6c0 5-4 9-7 12-3-3-7-7-7-12V5l7-2z",fill:"white",opacity:".95"}),(0,a.jsx)("path",{d:"M12 4.5l5 1.5v5c0 4-3.2 7-5 8.8-1.8-1.8-5-4.8-5-8.8v-5l5-1.5z",fill:d})]}),(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight",style:{color:d},children:"Report a found item"})]}),(0,a.jsxs)("div",{className:"rounded-3xl p-6 sm:p-8 shadow-[0_10px_30px_rgba(0,0,0,.05)] bg-white dark:bg-gray-900",style:{backgroundImage:'url("data:image/svg+xml,'.concat(p,'")'),backgroundColor:"#fafbff"},children:[g&&(0,a.jsx)("div",{className:"mb-4 rounded-lg border border-red-500/30 bg-red-50 p-3 text-sm text-red-700 dark:border-red-500/40 dark:bg-red-900/20 dark:text-red-200",children:g}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-5",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"mb-1 block text-sm font-medium",style:{color:d},children:"Title *"}),(0,a.jsx)("input",{name:"title",required:!0,placeholder:"e.g., Black North Face Jacket",className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900   px-3 py-2 text-sm shadow-sm outline-none focus:ring-2   focus:ring-[rgba(11,44,92,0.6)] focus:border-[rgba(11,44,92,1)]"})]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"mb-1 block text-sm font-medium",style:{color:d},children:"Category"}),(0,a.jsx)("select",{name:"category",defaultValue:"Misc",className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900   px-3 py-2 text-sm shadow-sm outline-none focus:ring-2   focus:ring-[rgba(11,44,92,0.6)] focus:border-[rgba(11,44,92,1)]",children:i.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"mb-1 block text-sm font-medium",style:{color:d},children:"Location found"}),(0,a.jsx)("input",{name:"location_found",placeholder:"e.g., Library 2F",className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900   px-3 py-2 text-sm shadow-sm outline-none focus:ring-2   focus:ring-[rgba(11,44,92,0.6)] focus:border-[rgba(11,44,92,1)]"})]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"mb-1 block text-sm font-medium",style:{color:d},children:"Date found *"}),(0,a.jsx)("input",{type:"date",name:"date_found",required:!0,defaultValue:new Date().toISOString().slice(0,10),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900   px-3 py-2 text-sm shadow-sm outline-none focus:ring-2   focus:ring-[rgba(11,44,92,0.6)] focus:border-[rgba(11,44,92,1)]"})]})]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"mb-1 block text-sm font-medium",style:{color:d},children:"Notes (optional)"}),(0,a.jsx)("textarea",{name:"notes",rows:3,placeholder:"Any identifying details, where exactly you left it, etc.",className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900   px-3 py-2 text-sm shadow-sm outline-none focus:ring-2   focus:ring-[rgba(11,44,92,0.6)] focus:border-[rgba(11,44,92,1)]"})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-[1fr,200px] md:items-start",children:[(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"mb-1 block text-sm font-medium",style:{color:d},children:"Photo (optional)"}),(0,a.jsx)("input",{type:"file",name:"photo",accept:"image/*",className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900   px-3 py-2 text-sm shadow-sm outline-none file:mr-3 file:rounded-md file:border-0   file:bg-gray-100 file:px-3 file:py-1.5 file:text-sm file:font-medium   hover:file:bg-gray-200 dark:file:bg-gray-800 dark:hover:file:bg-gray-700   focus:ring-2 focus:ring-[rgba(11,44,92,0.6)] focus:border-[rgba(11,44,92,1)]",onChange:e=>{var r;let t=null==(r=e.currentTarget.files)?void 0:r[0];t?b(URL.createObjectURL(t)):b(null)}}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:["JPG/PNG/WebP/HEIC, up to ",5,"MB."]})]}),u&&(0,a.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700",children:(0,a.jsx)("img",{src:u,alt:"Preview",className:"block h-40 w-full object-cover"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[(0,a.jsx)("button",{type:"submit",disabled:r,className:"rounded-lg px-4 py-2 text-sm font-semibold text-white shadow-md transition   hover:opacity-90 disabled:opacity-60",style:{backgroundColor:n},children:r?"Submitting...":"Submit Report"}),(0,a.jsx)("button",{type:"button",onClick:()=>history.back(),disabled:r,className:"rounded-lg border px-4 py-2 text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-800   disabled:opacity-60",style:{borderColor:"rgba(0,0,0,.1)",color:d},children:"Cancel"})]})]})]})]})}},8379:(e,r,t)=>{Promise.resolve().then(t.bind(t,6230))}},e=>{e.O(0,[993,441,255,358],()=>e(e.s=8379)),_N_E=e.O()}]);