(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[236],{63:(e,t,s)=>{"use strict";var n=s(7260);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},740:(e,t,s)=>{Promise.resolve().then(s.bind(s,7163))},7163:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var n=s(5155),a=s(2115),r=s(2619),l=s.n(r),i=s(63);let o="/school-lost-and-found",c="https://ogqjfeumqaaxorxrehxd.supabase.co",d="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ncWpmZXVtcWFheG9yeHJlaHhkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzcxOTUsImV4cCI6MjA3NTUxMzE5NX0.5EgofBpIzK_MyB4fRnTSLCxP3nMCznR5PIJ3kD0xjPk",u="".concat(o,"/no-image.png");async function m(e){var t;let s="".concat(c,"/rest/v1/items?id=eq.").concat(encodeURIComponent(e),"&select=*"),n=await fetch(s,{headers:{apikey:d,Authorization:"Bearer ".concat(d)},cache:"no-store"});if(!n.ok)return null;let a=await n.json();return null!=(t=null==a?void 0:a[0])?t:null}function h(){return(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)("main",{className:"mx-auto max-w-5xl px-4 py-8",children:(0,n.jsx)("div",{className:"rounded-xl border bg-white p-6 shadow-sm",children:"Loading item…"})}),children:(0,n.jsx)(x,{})})}function x(){var e,t,s,r;let d=(0,i.useSearchParams)(),h=(0,a.useMemo)(()=>{var e,t;return null!=(t=null==(e=d.get("id"))?void 0:e.trim())?t:""},[d]),[x,p]=(0,a.useState)(null),[f,g]=(0,a.useState)(!0),[b,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{var e,t;null==(t=window)||null==(e=t.scrollTo)||e.call(t,{top:0,behavior:"instant"})},[]),(0,a.useEffect)(()=>{if(!h){v("Missing item id."),g(!1);return}let e=!0;return g(!0),v(null),m(h).then(t=>{e&&(t||v("Item not found."),p(null!=t?t:null))}).catch(t=>e&&v((null==t?void 0:t.message)||"Failed to load item.")).finally(()=>e&&g(!1)),()=>{e=!1}},[h]);let j=null!=(e=null==x?void 0:x.title)?e:h?"Item #".concat(h):"Item",N=null!=(t=null==x?void 0:x.location)?t:"—",I=null!=(s=null==x?void 0:x.category)?s:"Misc",w=(null==x?void 0:x.date_found)?new Date(x.date_found).toLocaleDateString():"—",y=((null==x?void 0:x.description)||(null==x?void 0:x.notes)||"").trim(),k=(r=null==x?void 0:x.photo_url)?/^https?:\/\//i.test(r)?r:"".concat(c,"/storage/v1/object/public/").concat("item-photos","/").concat(r):u;return(0,n.jsxs)("main",{className:"mx-auto max-w-5xl px-4 py-8",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(l(),{href:"".concat(o,"/search"),className:"text-sm underline decoration-dotted underline-offset-4",style:{color:"#0B2C5C"},children:"← Back to Search"})}),!h&&(0,n.jsx)("div",{className:"rounded-xl border border-red-200 bg-red-50 p-6 text-red-700",children:"No item id provided."}),h&&f&&(0,n.jsx)("div",{className:"rounded-xl border bg-white p-6 shadow-sm",children:"Loading item…"}),h&&b&&!f&&(0,n.jsx)("div",{className:"rounded-xl border border-red-200 bg-red-50 p-6 text-red-700",children:b}),h&&!f&&!b&&x&&(0,n.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,n.jsx)("div",{className:"rounded-2xl border bg-white p-2 shadow-sm",children:(0,n.jsx)("img",{src:k,alt:j,className:"h-[420px] w-full rounded-xl bg-gray-50 object-contain",onError:e=>{e.currentTarget.src=u}})}),(0,n.jsxs)("article",{className:"rounded-2xl border bg-white p-5 shadow-sm",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:j}),(0,n.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:[N," • ",I]}),(0,n.jsxs)("p",{className:"text-xs text-gray-500",children:["Found ",w]}),(0,n.jsxs)("div",{className:"mt-5",children:[(0,n.jsx)("h2",{className:"text-base font-medium",children:"Description"}),(0,n.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-800",children:y||"No description provided."})]}),(0,n.jsxs)("div",{className:"mt-6 flex flex-wrap gap-3",children:[(0,n.jsx)(l(),{href:"".concat(o,"/claim?item=").concat(encodeURIComponent(h)),className:"inline-flex items-center justify-center rounded-lg bg-[#BF1E2E] px-4 py-2 text-sm font-semibold text-white hover:opacity-90",children:"Start claim"}),(0,n.jsx)(l(),{href:"".concat(o,"/search"),className:"inline-flex items-center justify-center rounded-lg border px-4 py-2 text-sm font-medium hover:bg-gray-50",children:"Back to search"})]})]})]})]})}}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=740)),_N_E=e.O()}]);