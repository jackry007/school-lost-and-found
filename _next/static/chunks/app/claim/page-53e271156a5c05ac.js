(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69],{63:(e,t,s)=>{"use strict";var a=s(7260);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},1289:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});let a=(0,s(1993).UU)("https://ogqjfeumqaaxorxrehxd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ncWpmZXVtcWFheG9yeHJlaHhkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzcxOTUsImV4cCI6MjA3NTUxMzE5NX0.5EgofBpIzK_MyB4fRnTSLCxP3nMCznR5PIJ3kD0xjPk")},2181:(e,t,s)=>{Promise.resolve().then(s.bind(s,5116))},5116:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(5155),n=s(2115),l=s(2619),r=s.n(l),i=s(63),o=s(1289),d=s(5274);let c="/school-lost-and-found",u="#0B2C5C",m="".concat(c,"/no-image.png");async function x(e){let{data:t,error:s}=await o.N.from("items").select("*").eq("id",e).maybeSingle();return s?null:null!=t?t:null}async function h(e){let{data:{user:t},error:s}=await o.N.auth.getUser();if(s||!t)throw Error("Please sign in first.");let{data:a,error:n}=await o.N.from("claims").insert([{...e,claimant_uid:t.id}]).select("id").single();if(n)throw Error(n.message);return[{id:a.id}]}let g=e=>(0,a.jsxs)("label",{...e,className:"block text-sm font-medium text-gray-900 ".concat(e.className||""),children:[e.children," ",e.required&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),f=e=>{let{id:t,children:s}=e;return(0,a.jsx)("p",{id:t,className:"mt-1 text-xs text-gray-500",children:s})},p=e=>{let{children:t}=e;return(0,a.jsx)("span",{className:"rounded-full px-2 py-0.5 text-xs font-medium",style:{background:"#0b2c5c14",color:u},children:t})};function b(e){let{backHref:t}=e;return(0,a.jsxs)("section",{className:"mt-6 rounded-2xl border bg-white p-5 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Please sign in"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in with your school account to submit a claim."}),(0,a.jsx)("div",{className:"mt-4 flex gap-3",children:(0,a.jsx)(r(),{href:t,className:"inline-flex items-center justify-center rounded-xl border border-gray-200 px-4 py-2 text-sm font-medium hover:bg-gray-50",children:"Back"})})]})}function y(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{}),children:(0,a.jsx)(v,{})})}function v(){var e,t;let s=(0,i.useRouter)(),l=(0,i.useSearchParams)(),y=(0,n.useMemo)(()=>{var e,t;return null!=(t=null==(e=l.get("item"))?void 0:e.trim())?t:""},[l]),v=(0,n.useMemo)(()=>"1"===l.get("chat"),[l]),[j,w]=(0,n.useState)(null),[N,_]=(0,n.useState)(!0),[S,k]=(0,n.useState)(null),[C,E]=(0,n.useState)("unknown"),[I,P]=(0,n.useState)(""),[q,B]=(0,n.useState)("Student"),[D,M]=(0,n.useState)(""),[R,F]=(0,n.useState)(""),[L,U]=(0,n.useState)(""),[T,z]=(0,n.useState)(""),[J,O]=(0,n.useState)(!1),[A,H]=(0,n.useState)(null),[V,W]=(0,n.useState)(""),[X,Y]=(0,n.useState)(!1),[Z,K]=(0,n.useState)(null),Q="guest"===C,G="authed"===C,$=!A&&(G||"unknown"===C),ee=!!y&&G&&!V;(0,n.useEffect)(()=>{!async function(){var e,t,s,a,n,l,r;let[{data:i},{data:d}]=await Promise.all([o.N.auth.getSession(),o.N.auth.getUser()]),c=null!=(e=i.session)?e:null,u=null!=(s=null!=(t=d.user)?t:null==c?void 0:c.user)?s:null;E(c?"authed":"guest"),P(null!=(a=null==u?void 0:u.id)?a:""),u?(M(null!=(r=u.email)?r:""),B((null==(n=u.user_metadata)?void 0:n.full_name)||(null==(l=u.email)?void 0:l.split("@")[0])||"Student")):(M(""),B("Student"))}();let{data:e}=o.N.auth.onAuthStateChange((e,t)=>{var s,a,n,l,r,i;E(t?"authed":"guest");let o=null!=(n=null==t?void 0:t.user)?n:null;P(null!=(l=null==o?void 0:o.id)?l:""),M(null!=(r=null==o?void 0:o.email)?r:""),B((null==o||null==(s=o.user_metadata)?void 0:s.full_name)||(null!=(i=null==o||null==(a=o.email)?void 0:a.split("@")[0])?i:"Student"))});return()=>e.subscription.unsubscribe()},[]),(0,n.useEffect)(()=>{Q&&(document.dispatchEvent(new Event("cc-auth:open")),window.scrollTo({top:0,behavior:"smooth"}))},[Q]),(0,n.useEffect)(()=>{"1"===new URL(window.location.href).searchParams.get("login")&&(document.dispatchEvent(new Event("cc-auth:open")),window.scrollTo({top:0,behavior:"smooth"}))},[]),(0,n.useEffect)(()=>{if(!y){k("Missing item id."),_(!1);return}let e=!0;return _(!0),k(null),w(null),x(y).then(t=>{e&&(t||k("Item not found or not publicly listed."),w(null!=t?t:null))}).catch(t=>e&&k((null==t?void 0:t.message)||"Failed to load item.")).finally(()=>e&&_(!1)),()=>{e=!1}},[y]);let et=(0,n.useCallback)(async()=>{if(!I||!(null==j?void 0:j.id))return;let{data:e,error:t}=await o.N.from("claims").select("id,item_id,claimant_name,claimant_email,claimant_uid,status,created_at as updated_at").eq("item_id",Number(j.id)).eq("claimant_uid",I).order("created_at",{ascending:!1}).limit(1).single();if(t)return void console.error("[openLatestChat] select error:",t.message);e&&(K(e),Y(!0))},[I,null==j?void 0:j.id]);async function es(e){if(e.preventDefault(),ee&&j&&!Q){O(!0),k(null),H(null);try{var t;let e=[L.trim(),T.trim()].filter(Boolean).join(" | ")||null,a=await h({item_id:j.id,claimant_name:q.trim(),claimant_email:(D||"").trim()||null,notes:R.trim(),proof:e}),n=null==a?void 0:a[0],l=null!=(t=null==n?void 0:n.id)?t:null;H(l),s.push("".concat(c,"/claim?item=").concat(encodeURIComponent(String(j.id)),"&chat=1"));return}catch(e){k((null==e?void 0:e.message)||"Failed to submit claim."),setTimeout(()=>{var e;return null==(e=document.getElementById("error-box"))?void 0:e.focus()},0)}finally{O(!1)}}}(0,n.useEffect)(()=>{v&&G&&(null==j?void 0:j.id)&&Promise.resolve().then(et)},[v,G,null==j?void 0:j.id,et]);let ea="".concat(c,"/search"),en="".concat(c,"/item/?id=").concat(encodeURIComponent(y||"")),el=(null==j?void 0:j.title)?"Claim: ".concat(j.title):"Claim Item",er=(t=null==j?void 0:j.photo_url)?/^https?:\/\//i.test(t)?t:"".concat("https://ogqjfeumqaaxorxrehxd.supabase.co","/storage/v1/object/public/").concat("item-photos","/").concat(t):m,ei=!ee||J||Q;return(0,a.jsxs)("main",{className:"min-h-[100svh] bg-gradient-to-b from-[#0b2c5c0d] to-transparent",children:[(0,a.jsx)("div",{className:"h-1.5 w-full",style:{backgroundImage:"linear-gradient(90deg, ".concat("#BF1E2E",", ").concat(u,")")}}),(0,a.jsxs)("div",{className:"mx-auto max-w-4xl px-4 py-8",children:[(0,a.jsxs)("nav",{className:"mb-4 flex flex-wrap items-center gap-3 text-sm",children:[(0,a.jsx)(r(),{href:en,className:"underline decoration-dotted underline-offset-4 hover:opacity-90",style:{color:u},children:"← Back to Item"}),(0,a.jsx)("span",{className:"text-gray-400",children:"/"}),(0,a.jsx)(r(),{href:ea,className:"underline decoration-dotted underline-offset-4 hover:opacity-90",style:{color:u},children:"Back to Search"})]}),(0,a.jsxs)("header",{className:"mb-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold tracking-tight text-gray-900",children:el}),j&&(0,a.jsxs)("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)("span",{children:j.category||"—"}),(0,a.jsx)("span",{"aria-hidden":!0,children:"•"}),(0,a.jsx)("span",{children:j.location||"—"}),(0,a.jsx)("span",{"aria-hidden":!0,children:"•"}),(0,a.jsx)("span",{children:j.date_found?new Date(j.date_found).toLocaleDateString():"—"}),j.status&&(0,a.jsx)(p,{children:j.status})]})]}),(0,a.jsx)("div",{"aria-live":"polite",className:"sr-only",children:S?"Error: ".concat(S):A?"Success. Reference ".concat(String(A)):""}),!y&&(0,a.jsx)("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-800",children:"No item id provided."}),y&&N&&(0,a.jsx)("div",{className:"rounded-2xl border bg-white p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"h-28 w-36 animate-pulse rounded-xl bg-gray-100"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("div",{className:"h-5 w-1/2 animate-pulse rounded bg-gray-100"}),(0,a.jsx)("div",{className:"h-4 w-2/3 animate-pulse rounded bg-gray-100"}),(0,a.jsx)("div",{className:"h-4 w-1/3 animate-pulse rounded bg-gray-100"})]})]})}),y&&S&&!N&&(0,a.jsx)("div",{id:"error-box",tabIndex:-1,className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-800 focus-outline-none",children:S}),y&&!N&&!S&&j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("section",{className:"rounded-2xl border bg-white p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"relative aspect-[4/5] h-28 overflow-hidden rounded-xl bg-gray-50 ring-1 ring-gray-200",children:(0,a.jsx)("img",{src:er,alt:null!=(e=j.title)?e:"Item photo",className:"h-full w-full object-cover",onError:e=>e.currentTarget.src=m})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h2",{className:"truncate text-lg font-semibold text-gray-900",children:j.title||"Unlabeled item"}),j.description||j.notes?(0,a.jsx)("p",{className:"mt-1 line-clamp-2 text-sm text-gray-600",children:j.description||j.notes}):(0,a.jsx)("p",{className:"mt-1 text-sm italic text-gray-500",children:"No description provided."})]})]})}),Q&&(0,a.jsx)(b,{backHref:en}),$&&(0,a.jsxs)("form",{onSubmit:es,noValidate:!0,className:"mt-6 rounded-2xl border bg-white p-5 shadow-sm",children:[(0,a.jsx)("input",{type:"text",inputMode:"none",name:"hp_cc_lf_v1",tabIndex:-1,autoComplete:"new-password","aria-hidden":"true",style:{position:"absolute",left:"-9999px",width:0,height:0},onChange:e=>W(e.target.value)}),G&&(0,a.jsxs)("div",{className:"mb-4 rounded-xl border border-gray-200 bg-gray-50 p-3 text-sm text-gray-700",children:["Signed in as ",(0,a.jsx)("b",{children:q||"Student"})," ",(0,a.jsx)("span",{className:"text-gray-500",children:D?"(".concat(D,")"):""})]}),(0,a.jsxs)("p",{className:"mb-5 text-sm text-gray-600",id:"form-guide",children:["Message and proof details are ",(0,a.jsx)("b",{children:"optional"}),". Share anything that helps us verify it’s yours. Please don’t include sensitive personal info."]}),(0,a.jsxs)("div",{className:"grid gap-5 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)(g,{htmlFor:"message",children:"Message (optional)"}),(0,a.jsx)("textarea",{id:"message",rows:6,maxLength:1e3,value:R,onChange:e=>F(e.target.value),className:"mt-1 w-full rounded-xl border p-3 text-sm outline-none transition focus-ring-2",placeholder:"Helpful details:\n• Where you think you left it (room/hallway/cafeteria)\n• When you last saw it\n• Description (color/brand/case/unique marks)\n• Anything only you would know (engraving, last 4, stickers)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(g,{htmlFor:"q1",children:["Proof detail #1 (optional)"," ",(0,a.jsx)("span",{className:"font-normal text-gray-500",children:"— brand, case color, last 4 digits, engraving"})]}),(0,a.jsx)("input",{id:"q1",value:L,onChange:e=>U(e.target.value),spellCheck:!1,className:"mt-1 w-full rounded-xl border border-gray-200 p-2.5 text-sm outline-none transition focus-ring-2 focus-ring-[rgba(11,44,92,.25)]",placeholder:"e.g., Last 4 digits on the case: 1420"}),(0,a.jsx)(f,{children:"Only share details someone else wouldn’t know."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(g,{htmlFor:"q2",children:"Proof detail #2 (optional)"}),(0,a.jsx)("input",{id:"q2",value:T,onChange:e=>z(e.target.value),spellCheck:!1,className:"mt-1 w-full rounded-xl border border-gray-200 p-2.5 text-sm outline-none transition focus-ring-2 focus-ring-[rgba(11,44,92,.25)]",placeholder:"Anything else that proves it's yours"})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[(0,a.jsxs)("button",{type:"submit",disabled:ei,className:"inline-flex items-center justify-center gap-2 rounded-xl bg-[#BF1E2E] px-4 py-2 text-sm font-semibold text-white shadow-sm transition active:scale-[0.99] disabled:opacity-60",children:[J&&(0,a.jsx)("span",{className:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-white border-b-transparent"}),J?"Submitting…":"Submit Claim"]}),(0,a.jsx)(r(),{href:en,className:"inline-flex items-center justify-center rounded-xl border border-gray-200 px-4 py-2 text-sm font-medium hover:bg-gray-50",children:"Cancel"})]})]}),A&&(0,a.jsxs)("section",{className:"mt-6 rounded-2xl border border-green-200 bg-green-50 p-6 text-green-900",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"✅ Claim received!"}),(0,a.jsxs)("p",{className:"text-sm mb-2",children:["We’ll review and contact you at"," ",(0,a.jsx)("b",{children:D||"your school email"}),"."]}),(0,a.jsxs)("p",{className:"text-sm mb-4",children:["Reference ID:"," ",(0,a.jsx)("code",{className:"font-mono text-green-800",children:String(A)}),(0,a.jsx)("button",{type:"button",className:"ml-2 inline-flex items-center rounded border px-2 py-0.5 text-xs",onClick:()=>navigator.clipboard.writeText(String(A)),"aria-label":"Copy reference ID",children:"Copy"})]}),(0,a.jsx)("div",{className:"flex gap-3",children:(0,a.jsx)(r(),{href:ea,className:"inline-flex items-center justify-center rounded-lg border border-gray-200 px-4 py-2 text-sm font-medium hover:bg-gray-50",children:"← Back to Search"})})]}),!A&&(0,a.jsx)("div",{className:"pointer-events-none fixed inset-x-0 bottom-0 z-10 block p-3 md:hidden",children:(0,a.jsx)("div",{className:"pointer-events-auto mx-auto max-w-lg rounded-2xl border bg-white p-3 shadow-lg",children:(0,a.jsx)("button",{type:"button",onClick:()=>{var e;return null==(e=document.querySelector("form"))?void 0:e.requestSubmit()},disabled:ei,className:"w-full rounded-xl bg-[#BF1E2E] px-4 py-3 text-center text-sm font-semibold text-white disabled:opacity-60",children:J?"Submitting…":"Submit Claim"})})})]}),(0,a.jsxs)("p",{className:"mt-10 text-center text-xs text-gray-500",children:["Bring a student ID for pickup • Please don’t post personal info • Questions? Visit"," ",(0,a.jsx)(r(),{href:"".concat(c,"/faq"),className:"underline",children:"FAQ"}),"."]})]}),X&&Z&&(0,a.jsx)(d.A,{open:X,claim:Z,onClose:()=>Y(!1),meIsStaff:!1,currentUid:I})]})}},5274:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(5155),n=s(2115),l=s(7650),r=s(1289);function i(e){var t;let{open:s,claim:i,onClose:o,meIsStaff:d,currentUid:c}=e,[u,m]=(0,n.useState)([]),[x,h]=(0,n.useState)(""),[g,f]=(0,n.useState)(!1),[p,b]=(0,n.useState)(!1),y=(0,n.useRef)(null),v=(0,n.useRef)(null),j=null!=(t=null==i?void 0:i.id)?t:null,w=e=>d?"claimant"===e||"student"===e:"staff"===e;async function N(e){await r.N.rpc("mark_thread_seen",{p_claim_id:e,p_uid:c})}async function _(){if(!j)return;let e=x.trim();if(!e||p)return;b(!0),h("");let t=Date.now(),s={id:t,claim_id:j,sender_uid:c,sender_role:d?"staff":"claimant",body:e,created_at:new Date().toISOString(),seen_by_claimant:!d,seen_by_staff:!!d,_temp:!0,_error:null};m(e=>[...e,s]);let{data:a,error:n}=await r.N.from("claim_messages").insert({claim_id:j,sender_uid:c,sender_role:s.sender_role,body:e,seen_by_staff:!!d,seen_by_claimant:!d}).select("*").single();if(n||!a){m(e=>e.map(e=>e.id===t?{...e,_error:(null==n?void 0:n.message)||"Failed"}:e)),b(!1);return}m(e=>e.map(e=>e.id===t?a:e)),b(!1)}(0,n.useEffect)(()=>{if(!s)return;let e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}},[s]),(0,n.useEffect)(()=>{if(!s||!j)return;let e=!1;return(async()=>{let{data:t,error:s}=await r.N.from("claim_messages").select("*").eq("claim_id",j).order("created_at",{ascending:!0});e||s||!t||m(t),await N(j);let a=r.N.channel("claim_messages:".concat(j)).on("postgres_changes",{event:"INSERT",schema:"public",table:"claim_messages",filter:"claim_id=eq.".concat(j)},async e=>{let t=e.new;m(e=>[...e,t]),t.sender_uid!==c&&w(t.sender_role)&&await N(j)}).subscribe(t=>{e||"SUBSCRIBED"!==t||f(!0)});return()=>{r.N.removeChannel(a)}})(),()=>{e=!0,f(!1)}},[s,j,c,d]),(0,n.useEffect)(()=>{if(!s||!j||0===u.length)return;let e=u[u.length-1];e.sender_uid!==c&&w(e.sender_role)&&N(j)},[u.length,s,j,c]),(0,n.useEffect)(()=>{var e;null==(e=y.current)||e.scrollIntoView({block:"end"})},[u.length]),(0,n.useEffect)(()=>{var e;if(!s)return;null==(e=v.current)||e.focus();let t=e=>"Escape"===e.key&&o();return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[s,o]),(0,n.useLayoutEffect)(()=>{let e=v.current;e&&(e.style.height="0px",e.style.height=Math.min(120,e.scrollHeight)+"px")},[x]);let S=(0,n.useMemo)(()=>g?"Live":"Connecting…",[g]);if(!s||!i)return null;let k=(0,a.jsxs)("div",{className:"fixed inset-0 z-[1000]",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:o,"aria-hidden":"true"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"chat-modal-title",className:"   w-full max-w-lg   max-h-[min(90vh,800px)]   overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-2xl   grid grid-rows-[auto,1fr,auto]   ",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gradient-to-r from-[#b10015] to-[#0f2741] px-4 py-3 text-white",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsxs)("h3",{id:"chat-modal-title",className:"truncate text-base font-semibold",children:["Messages — Claim #",i.id," (Item #",i.item_id,")"]}),(0,a.jsx)("div",{className:"mt-0.5 truncate text-xs text-white/80",children:i.claimant_name||i.claimant_email||"Student"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-[11px] ".concat(g?"bg-white/20":"bg-white/10"),title:"Realtime status",children:[(0,a.jsx)("span",{className:"mr-1 inline-block h-2 w-2 rounded-full ".concat(g?"bg-emerald-300":"bg-amber-300 animate-pulse")}),S]}),(0,a.jsx)("button",{className:"rounded-full bg-white/10 px-3 py-1.5 text-sm text-white hover:bg-white/20",onClick:o,children:"Close"})]})]}),(0,a.jsx)("div",{className:"px-4 py-3 overflow-hidden",children:(0,a.jsxs)("div",{className:"h-full overflow-y-auto rounded-xl border bg-white p-3",style:{maxHeight:"56vh",scrollBehavior:"smooth"},children:[0===u.length&&(0,a.jsx)("div",{className:"py-8 text-center text-sm text-gray-500",children:"No messages yet."}),u.map(e=>{let t=e.sender_uid===c;return(0,a.jsx)("div",{className:"mb-2 flex ".concat(t?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-[75%] rounded-2xl px-3 py-2 text-sm shadow-sm ".concat(t?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:[(0,a.jsx)("div",{className:"whitespace-pre-wrap break-words",children:e.body}),(0,a.jsxs)("div",{className:"mt-1 text-[10px] ".concat(t?"text-white/80":"text-gray-500"),children:[function(e){let t=new Date(e);if(Number.isNaN(+t))return e;let s=new Date;return t.getFullYear()===s.getFullYear()&&t.getMonth()===s.getMonth()&&t.getDate()===s.getDate()?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleString()}(e.created_at),e._temp&&!e._error&&" \xb7 sending…",e._error&&(0,a.jsx)("span",{className:"ml-1 text-rose-400",children:"\xb7 failed"})]})]})},e.id)}),(0,a.jsx)("div",{ref:y})]})}),(0,a.jsxs)("div",{className:"border-t bg-white px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[(0,a.jsx)("textarea",{ref:v,value:x,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),p||_())},placeholder:"Type a message…  (Enter to send, Shift+Enter for newline)",className:"w-full resize-none rounded-xl border border-gray-300 bg-white px-3 py-2 text-sm   text-gray-900 placeholder-gray-500   focus:outline-none focus:ring-2 focus:ring-indigo-500",rows:1,maxLength:4e3}),(0,a.jsx)("button",{onClick:_,className:"rounded-xl bg-black px-4 py-2 text-sm font-medium text-white disabled:opacity-60",disabled:p||0===x.trim().length,children:p?"Sending…":"Send"})]}),(0,a.jsxs)("div",{className:"mt-1 flex items-center justify-between text-[11px] text-gray-500",children:[(0,a.jsxs)("span",{children:["Press ",(0,a.jsx)("kbd",{className:"rounded border px-1",children:"Enter"})," to send"]}),(0,a.jsxs)("span",{className:"text-gray-400",children:[x.length.toLocaleString(),"/4,000"]})]})]})]})})]});return(0,l.createPortal)(k,document.body)}}},e=>{e.O(0,[993,619,441,255,358],()=>e(e.s=2181)),_N_E=e.O()}]);